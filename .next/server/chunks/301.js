"use strict";exports.id=301,exports.ids=[301],exports.modules={70301:(e,t,s)=>{s.d(t,{M:()=>w});var a=s(57635),n=s(24792),l=s(99744),r=s(6293),i=s(87005),o=s(25882),d=s(30322),c=s(23388),m=s(82466);async function u(){let{data:e}=await c.o.post("/auth/request-verify-email-code");return e}let x=()=>(0,m.D)({mutationFn:u});var p=s(91434);async function f({email:e,otp:t,userLoggedIn:s}){let{data:a}=await c.o.post("/auth/verify-email-otp",{email:e,otp:t,userLoggedIn:s});return a}let h=()=>(0,m.D)({mutationFn:f});var g=s(90096),b=s(49990),v=s(76919),j=s(98546),y=s(67854);function w({noshow:e=!1}){let[t,s]=(0,l.useState)(["","","","",""]),[c,m]=(0,l.useState)(""),[u,f]=(0,l.useState)("email"),[w,N]=(0,l.useState)(!1),F=(0,r.useRouter)();(0,r.useSearchParams)();let{toast:k}=(0,d.pm)(),{mutate:C,isPending:S}=x(),{mutate:E,isPending:P}=(0,p.p)(),{mutate:$,isPending:I}=h(),{data:D}=(0,b.a)(),B=(e,a)=>{let n=a.target.value;if(/^\d?$/.test(n)){let a=[...t];if(a[e]=n,s(a),n&&e<4){let t=document.getElementById(`otp-input-${e+1}`);t&&t.focus()}}},R=(e,s)=>{if("Backspace"===s.key&&!t[e]&&e>0){let t=document.getElementById(`otp-input-${e-1}`);t&&t.focus()}},Z=async()=>{let e=t.join("");if(5!==e.length){k({title:"Invalid OTP",description:"Please enter a 5-digit code",variant:"destructive"});return}try{$({email:c,otp:e,userLoggedIn:w},{onSuccess:e=>{"password-reset"===u?e?.userId?F.replace(`/auth/reset-password?userId=${e?.userId}&token=${e?.token}`):k({title:"Verification Failed",description:"User ID not returned from server.",variant:"destructive"}):(k({title:"Email Verified",description:"Your email has been verified successfully!"}),F.replace(i.Z.auth.signIn))},onError:e=>{k({title:"Verification Failed",description:e?.response?.data?.message||"Invalid or expired OTP",variant:"destructive"})}})}catch(e){k({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"})}},O=(0,l.useCallback)(async()=>new Promise((e,t)=>{"password-reset"===u?E(c,{onSuccess:()=>{k({title:"Code Sent",description:"A new password reset code has been sent to your email"}),e(!0)},onError:e=>{t(e)}}):C(void 0,{onSuccess:()=>{k({title:"Code Sent",description:"A new verification code has been sent to your email"}),e(!0)},onError:e=>{t(e)}})}),[c,u,E,C,k]),{isPending:V,cooldownSeconds:z,error:L,handleResend:W,resetCooldown:A,canResend:q}=(0,j.o)({onResend:O,onSuccess:()=>{},onError:e=>{let t=(0,g.v)(e);k({title:"Error",description:t?.message||"Failed to send code",variant:"destructive"})},defaultCooldown:60});return a.jsx("section",{className:"flex p-10 h-screen container items-center justify-center max-md:p-4 max-3xl:h-auto max-md:!h-screen",children:(0,a.jsxs)("div",{className:`w-full bg-white rounded-max p-8 flex ${e?"":"pl-0"} h-full max-md:p-4 max-md:rounded-40  max-h-[900px] relative max-md:!h-full`,children:[!e&&a.jsx("div",{className:"absolute left-10 top-8 max-md:top-4 max-md:left-4",children:a.jsx(y.Z,{})}),(0,a.jsxs)("div",{className:`${e?"w-full mx-auto max-w-[600px]":"w-1/2 px-10"} h-full flex flex-col items-start text-xs max-md:w-full max-md:px-0 my-auto max-md:pt-4`,children:[(0,a.jsxs)("div",{className:"flex flex-col w-full my-auto",children:[a.jsx("span",{className:"w-[70px] h-[70px] rounded-full bg-[#F3F3F3] flex items-center justify-center",children:a.jsx("img",{src:"/images/vectors/mail.svg",alt:"Email icon"})}),a.jsx("span",{className:"text-[33px] font-medium flex leading-normal mt-3",children:"password-reset"===u?"Password Reset":"Email Verification"}),a.jsx("span",{className:"text-[#9C9C9C] text-sm mt-2",children:"password-reset"===u?`We have sent a code to ${c}`:`We have sent a verification code to ${c}`}),a.jsx("div",{className:"flex gap-4 mt-6",children:t.map((e,t)=>a.jsx("input",{id:`otp-input-${t}`,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>B(t,e),onKeyDown:e=>R(t,e),className:`h-28 max-md:h-16 max-md:rounded-lg max-md:text-3xl w-full border-2 ${e?"border-yellow-400":"border-[#D8DADC]"} focus:border-CSecondary focus:outline-none rounded-[27px] text-center text-[43px]`,autoFocus:0===t},t))}),a.jsx(o.f,{onClick:Z,loading:I||P,className:"w-full h-16 bg-black text-white text-lg rounded-full mt-7 max-md:h-12 max-md:text-base",children:"password-reset"===u?"Continue":"Verify Email"}),a.jsx("span",{className:"text-gray-500 text-lg font-medium flex items-center justify-center text-center mt-4 space-x-1",children:z>0?(0,a.jsxs)("span",{className:"text-gray-600 ml-1",children:["(Resend available in ",a.jsx(v.F,{seconds:z,onComplete:A,className:"text-gray-800 font-semibold"}),")"]}):(0,a.jsxs)("span",{children:["I didn't receive a code",a.jsx("button",{onClick:W,disabled:!q||V,className:`ml-1 text-gray-800 font-semibold underline decoration-2 underline-offset-2 hover:text-gray-900 transition-colors ${!q||V?"opacity-50 cursor-not-allowed":""}`,children:V?"Sending...":"Resend"})]})})]}),!e&&(0,a.jsxs)("div",{className:"flex h-7 gap-4 w-1/2 items-center justify-center absolute bottom-8 left-0 max-md:w-full max-md:bottom-4",children:[a.jsx("span",{className:"w-3.5 h-3.5 bg-black rounded-full"}),a.jsx("span",{className:"w-3.5 h-3.5 bg-[#878484] rounded-full"}),a.jsx("span",{className:"w-3.5 h-3.5 bg-black rounded-full"}),a.jsx("span",{className:"w-3.5 h-3.5 bg-black rounded-full"})]})]}),!e&&(0,a.jsxs)("div",{className:"w-1/2 min-h-full bg-[#F5F5F5] rounded-40 flex flex-col items-center py-8 min-h-[810px] max-md:hidden",children:[a.jsx("span",{className:"w-44 flex",children:a.jsx(n.K7,{width:"100%",height:"100%"})}),(0,a.jsxs)("span",{className:"text-[45px] mt-8 relative",children:[a.jsx("img",{alt:"Paws decoration",className:"absolute -left-14 -top-7 w-[68px] h-[63px]",src:"/images/home/paws-indigo.svg"}),a.jsx("img",{alt:"Paws decoration",className:"absolute -right-10 -top-8 w-[51px] h-[48px]",src:"/images/home/paws-green.svg"}),"Welcome to ",a.jsx("strong",{className:"font-semibold",children:"Pups4Sale"})]}),(0,a.jsxs)("span",{className:"text-lg mt-1",children:["Join the ",a.jsx("strong",{className:"font-semibold",children:"largest community"})," of responsible ",a.jsx("strong",{className:"font-semibold",children:"pet lovers."})]}),a.jsx("img",{className:"mt-6",src:"/images/vectors/signUp.png",alt:"Sign up illustration"}),(0,a.jsxs)("div",{className:"flex flex-col w-full items-start px-8 gap-4",children:[a.jsx("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#F0EBF4] rounded-full",children:"Find your perfect furry companion"}),a.jsx("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#E7F5F7] rounded-full ml-auto",children:"Connect with trusted breeders & adopters"}),a.jsx("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#FCF4DC] rounded-full",children:"List puppies safely and easily"})]}),(0,a.jsxs)("span",{className:"text-5xl font-normal text-center mt-auto",children:[a.jsx("strong",{className:"font-semibold",children:"Start"}),"\xa0your\xa0",(0,a.jsxs)("strong",{className:"relative font-semibold",children:["journey",a.jsx("img",{className:"absolute right-0 -bottom-1 w-full",src:"/images/vectors/line-8.svg"})]}),"\xa0today!"]})]})]})})}},67854:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(57635),n=s(6293),l=s(87005);function r({fallbackRoute:e=l.Z.public.home,className:t=""}){let s=(0,n.useRouter)();return(0,a.jsxs)("button",{onClick:()=>{window.history.length>1?s.back():s.push(e)},className:`flex items-center bg-[#F3F3F3] p-0.5 rounded-full pr-2 gap-1 font-medium text-xs cursor-pointer hover:bg-[#E5E5E5] transition-colors ${t}`,children:[a.jsx("span",{className:"flex size-6 bg-black rounded-full items-center justify-center",children:a.jsx("img",{src:"/images/vectors/arrowLeftWhite.svg",alt:"Go back"})}),"Go Back"]})}},25882:(e,t,s)=>{s.d(t,{f:()=>o});var a=s(57635),n=s(99744),l=s(21030),r=s(29866),i=s(2660);function o({children:e,loading:t=!1,loadingText:s="Loading...",onClick:o,variant:d="default",size:c="default",className:m,disabled:u,...x}){let[p,f]=(0,n.useState)(!1),h=async e=>{if(o){f(!0);try{await o(e)}finally{f(!1)}}},g=t||p;return(0,a.jsxs)(l.z,{variant:d,size:c,disabled:u||g,onClick:h,className:(0,i.cn)("relative",m),...x,children:[g&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(r.Z,{size:"sm",color:"current"})}),a.jsx("span",{className:(0,i.cn)(g&&"opacity-0"),children:g?s:e})]})}},91434:(e,t,s)=>{s.d(t,{p:()=>r});var a=s(23388),n=s(82466);async function l(e){let{data:t}=await a.o.post("/auth/forgot-password",{email:e});return t}let r=()=>(0,n.D)({mutationFn:l})},2660:(e,t,s)=>{s.d(t,{BX:()=>o,SI:()=>i,cn:()=>n,p3:()=>l,qh:()=>r});var a=s(54993);let n=(...e)=>(0,a.Z)(e),l=e=>{if(!(null==e||isNaN(+e))){if("number"==typeof e)return e;if("string"==typeof e)return+e}},r=e=>null!=e&&"number"==typeof+e&&!isNaN(+e),i=e=>0===Object.keys(e).length,o=e=>0===Object.keys(e).length||Object.values(e).every(e=>!e)}};