(()=>{var e={};e.id=5520,e.ids=[5520],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},28807:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{GlobalError:()=>c.a,__next_app__:()=>f,originalPathname:()=>g,pages:()=>h,routeModule:()=>b,tree:()=>p});var r=s(62149),i=s(99749),l=s(43345);s(51962);var n=s(55552),o=s(59838),d=s(20524),c=s.n(d),m=s(93623),u={};for(let e in m)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>m[e]);s.d(t,u);var x=e([r,i,l]);[r,i,l]=x.then?(await x)():x;let p=["",{children:["(pages)",{children:["create-listing",{children:["stud-listing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,62149)),"/home/runner/work/next-frontend/next-frontend/app/(pages)/create-listing/stud-listing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99749)),"/home/runner/work/next-frontend/next-frontend/app/(pages)/create-listing/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,43345)),"/home/runner/work/next-frontend/next-frontend/app/(pages)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51962,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91084))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,51962,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91084))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],h=["/home/runner/work/next-frontend/next-frontend/app/(pages)/create-listing/stud-listing/page.tsx"],g="/(pages)/create-listing/stud-listing/page",f={require:s,loadChunk:()=>Promise.resolve()},b=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(pages)/create-listing/stud-listing/page",pathname:"/create-listing/stud-listing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}});a()}catch(e){a(e)}})},98285:(e,t,s)=>{Promise.resolve().then(s.bind(s,34365))},34365:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T,dynamic:()=>O});var a=s(57635),r=s(28422),i=s(30676),l=s(95062),n=s(96165),o=s(59394),d=s(74208),c=s(78500),m=s(3567),u=s(81201),x=s(3328),p=s(38971),h=s(28849),g=s(63463),f=s(99744),b=s(2660),v=s(51746),j=s(87102);let y=d.Ry({title:d.Z_({message:"Please enter title"}).min(1,{message:"Please enter title"}),breed:d.Z_({message:"Please select breed"}).min(1,{message:"Please select breed"}),dateOfBirth:d.oQ.date({message:"Please enter date of birth"}).refine(e=>e<=new Date,{message:"Date should not be in the future."}),healthCertificatesText:d.Z_({message:"Please enter health certificates"}),healthCertificatesImages:(0,j.NY)({maxFileSize:1048576,maxImages:3,minImages:0}),serviceFee:d.oQ.number().min(1,{message:"Please enter fee"}).max(1e8,{message:"Please enter valid stud fee"}),dogName:d.Z_({message:"Please enter dog name"}).min(1,{message:"Please enter dog name"}),ankcNumber:d.Z_({message:"Please enter ANKC number"}).min(1,{message:"Please enter ANKC number"}),availibilityDate:d.oQ.date({message:"Please enter collection date"}).refine(e=>e>=new Date,{message:"Date should be in the future."}),images:(0,j.NY)({maxFileSize:1048576,maxImages:10,minImages:1}),provenLittersImages:(0,j.NY)({maxFileSize:1048576,maxImages:10,minImages:1}),provenLittersVideoUrls:d.IX(j.jN).optional().default([]),videoUrls:d.IX(j.jN).optional().default([])});var N=s(43606),I=s(35594),w=s(87005),_=s(2141),C=s(90096),S=s(30322),P=s(95110),D=s(6293),L=s(31015),k=s(46281);let U=(e,t)=>`${e}@${t}`,q=e=>{let[t,s]=e.split("@");return{adIdx:Number(t),productIdx:Number(s)}},F=[{title:"Stud or Bitch Listing",description:"Create a new stud or bitch listing",form:a.jsx(()=>{let{stepIdx:e,totalSteps:t,formData:s,goToNextStep:r,goToPreviousStep:l,appendFormData:n}=(0,i.p)(),{handleSubmit:o,watch:d,register:j,control:N,formState:{errors:I}}=(0,c.cI)({defaultValues:{title:s.title,breed:s.breed,dateOfBirth:s.dateOfBirth,healthCertificatesText:s.healthCertificatesText,healthCertificatesImages:s.healthCertificatesImages,serviceFee:s.serviceFee,availibilityDate:s.availibilityDate,dogName:s.dogName,ankcNumber:s.ankcNumber,images:s.images,videoUrls:s.videoUrls,provenLittersImages:s.provenLittersImages,provenLittersVideoUrls:s.provenLittersVideoUrls},mode:"onChange",resolver:(0,m.F)(y)}),w=d();return(0,f.useEffect)(()=>{(0,b.SI)(w)||n(w)},[w,n]),(0,a.jsxs)("form",{className:"pt-10 pb-28",noValidate:!0,onSubmit:o(e=>{r(e)}),children:[a.jsx(u.II,{type:"text",label:"Listing title",className:"mb-4",error:I?.title?.message,required:!0,...j("title")}),(0,a.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-start justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[a.jsx("div",{className:"flex-1",children:a.jsx(c.Qr,{name:"breed",control:N,render:({field:e})=>a.jsx(x.hQ,{label:"Select breed",value:e.value,setValue:t=>e.onChange(t),options:p.AW.map(e=>({value:e.value,label:e.label})),btnClassName:"w-full active:!scale-100",popoverClassName:"w-[--radix-popover-trigger-width] ",error:I?.breed?.message})})}),a.jsx(c.Qr,{name:"dateOfBirth",control:N,render:({field:e})=>(0,a.jsxs)("label",{className:"flex-1",children:[a.jsx("span",{className:"mb-2 block font-bold text-sm",children:"Date of birth"}),a.jsx(v.M,{mode:"single",date:e.value,setDate:t=>{e.onChange(t)},error:I?.dateOfBirth?.message,disabled:{after:new Date}})]})})]}),(0,a.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[a.jsx(u.II,{type:"text",label:"Dog name",className:"flex-1",error:I?.dogName?.message,required:!0,...j("dogName")}),a.jsx(u.II,{type:"number",label:"Service Fee",className:"flex-1",error:I?.serviceFee?.message,required:!0,...j("serviceFee")})]}),a.jsx("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:a.jsx(c.Qr,{name:"availibilityDate",control:N,render:({field:e})=>(0,a.jsxs)("label",{className:"flex-1",children:[a.jsx("span",{className:"block font-bold text-sm mb-1.5",children:"Availibility date"}),a.jsx(v.M,{mode:"single",date:e.value,setDate:t=>{e.onChange(t)},error:I?.availibilityDate?.message,disabled:{before:new Date}})]})})}),a.jsx(u.II,{type:"text",label:"ANKC / State Breeder Registration Number",className:"my-4",error:I?.ankcNumber?.message,required:!0,...j("ankcNumber")}),a.jsx(u.II,{type:"text",label:"Health certificate",className:"mb-4",error:I?.healthCertificatesText?.message,required:!0,...j("healthCertificatesText")}),a.jsx(c.Qr,{name:"healthCertificatesImages",control:N,render:({field:e})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.b,{label:"Upload health certificates",accept:"image/*",multiple:!0,onChange:t=>{e.onChange([...e.value??[],...Array.from(t)])}}),e.value&&a.jsx(g.e,{className:"mb-4",images:e.value.map((e,t)=>({url:e instanceof File?URL.createObjectURL(e):"",error:I?.healthCertificatesImages?.[t]?.message})),onDelete:t=>{e.value.splice(t,1),e.onChange(e.value)}})]})}),I?.healthCertificatesImages&&a.jsx(u.cp,{className:"mb-4",size:"lg",error:I?.healthCertificatesImages?.message}),a.jsx(c.Qr,{name:"images",control:N,render:({field:e})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.b,{label:"Upload stud or bitch images",accept:"image/*",multiple:!0,onChange:t=>{e.onChange([...e.value??[],...Array.from(t)])}}),e.value&&a.jsx(g.e,{className:"mb-4",images:e.value.map((e,t)=>({url:e instanceof File?URL.createObjectURL(e):"",error:I?.images?.[t]?.message})),onDelete:t=>{e.value.splice(t,1),e.onChange(e.value)}})]})}),I?.images&&a.jsx(u.cp,{className:"mb-4",size:"lg",error:I?.images?.message}),a.jsx(c.Qr,{name:"videoUrls",control:N,render:({field:e})=>a.jsx(a.Fragment,{children:a.jsx(u.II,{type:"text",label:"Enter stud or bitch video URLs (comma separated)",className:"flex-1 mb-4",error:I?.videoUrls?.message,required:!0,value:e.value?.join(",")??"",onChange:t=>{let s=t.target.value;e.onChange(s?s.split(","):[])}})})}),I?.videoUrls?.length&&I?.videoUrls?.length>0&&a.jsx(u.cp,{className:"mb-4",size:"lg",error:I?.videoUrls?.find?.(e=>!!e?.message)?.message}),a.jsx(c.Qr,{name:"provenLittersImages",control:N,render:({field:e})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.b,{label:"Upload proven litter images",accept:"image/*",multiple:!0,onChange:t=>{e.onChange([...e.value??[],...Array.from(t)])}}),e.value&&a.jsx(g.e,{className:"mb-4",images:e.value.map((e,t)=>({url:e instanceof File?URL.createObjectURL(e):"",error:I?.provenLittersImages?.[t]?.message})),onDelete:t=>{e.value.splice(t,1),e.onChange(e.value)}})]})}),I?.provenLittersImages&&a.jsx(u.cp,{className:"mb-4",size:"lg",error:I?.provenLittersImages?.message}),a.jsx(c.Qr,{name:"provenLittersVideoUrls",control:N,render:({field:e})=>a.jsx(a.Fragment,{children:a.jsx(u.II,{type:"text",label:"Enter proven litter video URLs (comma separated)",className:"flex-1 mb-4",error:I?.provenLittersVideoUrls?.message,required:!0,value:e.value?.join(",")??"",onChange:t=>{let s=t.target.value;e.onChange(s?s.split(","):[])}})})}),I?.provenLittersVideoUrls?.length&&I?.provenLittersVideoUrls?.length>0&&a.jsx(u.cp,{className:"mb-4",size:"lg",error:I?.provenLittersVideoUrls?.find?.(e=>!!e?.message)?.message}),a.jsx(x.OZ,{currentStepIdx:e,totalSteps:t,goToPreviousStep:l})]})},{}),validationSchema:y},{title:"Contact Information",description:"",form:a.jsx(o.b,{}),validationSchema:o.R},{title:"Checkout",description:"",form:a.jsx(()=>{let{stepIdx:e,totalSteps:t,getFormData:s,goToPreviousStep:l,appendFormData:o,replaceFormData:d}=(0,i.p)(),{data:c,isLoading:m}=(0,L.X)("stud_bitch"),u=c?.products??[],{data:p=[]}=(0,k.x)("stud_bitch"),{mutateAsync:h,isPending:g}=(0,_.Pl)(),{mutateAsync:b,isPending:v}=(0,P.f)(),j=(0,D.useRouter)(),[y,F]=(0,f.useState)(0),[A,z]=(0,f.useState)(void 0),O=u[y],R=A?q(A):void 0,T=R?p[R.adIdx]:void 0,Q=R?T?.products?.[R.productIdx]:void 0,V=(O?.price??0)+(Q?Q.price:0),B=async e=>{try{let{checkoutUrl:t}=await b(e);d({}),j.push(t)}catch(t){console.error(t);let e=(0,C.v)(t);(0,S.Am)({title:"Failed to create checkout link",description:e?.message??"Something went wrong"})}},Z=async()=>{if(!O){(0,S.Am)({title:"Failed!",description:"Please select a listing duration"});return}if(T&&Q&&O.durationInDays<Q.durationInDays){(0,S.Am)({title:"Failed!",description:"Ad duration is greater than listing duration"});return}let e=s();if(e.listingId){B({listingId:e.listingId,durationInDays:O.durationInDays,adId:T?.id,adDurationInDays:Q?.durationInDays});return}try{let t=await h({type:"stud_bitch",fields:e});o({listingId:t.id}),await B({listingId:t.id,durationInDays:O.durationInDays,adId:T?.id,adDurationInDays:Q?.durationInDays})}catch(t){console.error(t);let e=(0,C.v)(t);(0,S.Am)({title:"Failed!",description:e?.message??"Something went wrong"})}};return(0,a.jsxs)("div",{className:"mt-6 pb-40",children:[a.jsx(I.RequireUser,{className:"max-w-full",successRedirect:`${w.Z.public.createListing.studListing}?step=${e+1}`,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"text-h5",children:[a.jsx("span",{className:"mb-2 block font-bold",children:"Listing Duration"}),m?"Loading...":(0,a.jsxs)(N.Ph,{disabled:u.length<=1,onValueChange:e=>{F(Number(e))},value:y.toString(),children:[a.jsx(N.i4,{disabled:u.length<=1,className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:a.jsx(N.ki,{placeholder:"Select stud / bitch listing"})}),a.jsx(N.Bw,{children:u.map((e,t)=>a.jsx(N.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:t.toString(),children:(0,a.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[a.jsx(r.X,{tag:"h3",children:e.title}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Duration"," ",a.jsx("span",{className:"text-gray-light font-bold",children:e.durationInDays})," ","days"]}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Price"," ",a.jsx("span",{className:"font-bold",children:e.price})," ",n.$S," "]})]})},t.toString()))})]})]}),p.length>0&&(0,a.jsxs)("label",{className:"text-h5",children:[a.jsx("span",{className:"mb-2 block font-bold",children:"Select Ad"}),(0,a.jsxs)(N.Ph,{onValueChange:e=>{z(e)},value:A,children:[a.jsx(N.i4,{className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:a.jsx(N.ki,{placeholder:"Select ad"})}),(0,a.jsxs)(N.Bw,{children:[A&&a.jsx(x.zx,{className:"w-full p-4",variant:"ghost",onClick:e=>{e.stopPropagation(),z(void 0)},children:"Clear"}),p.map((e,t)=>e.products.map((s,i)=>a.jsx(N.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:U(t,i),children:(0,a.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[a.jsx(r.X,{tag:"h3",children:e.title}),a.jsx(r.x,{children:s.description}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Duration"," ",a.jsx("span",{className:"text-gray-light font-bold",children:s.durationInDays})," ","days"]}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Price"," ",a.jsx("span",{className:"font-bold",children:s.price})," ",n.$S]})]})},U(t,i))))]})]},A)]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,a.jsxs)(r.x,{children:["Listing (",O?.durationInDays," days)"]}),a.jsx(r.x,{children:(0,a.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",O?.price]})})]}),T&&Q&&(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.x,{children:["Ad ",T?.title," (",Q.durationInDays," ","days)"]}),a.jsx(r.x,{className:"text-sm",children:Q.description})]}),a.jsx(r.x,{children:(0,a.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",Q.price]})})]}),a.jsx(x.iz,{className:"mb-2 mt-4"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx(r.x,{children:"Total"}),a.jsx(r.x,{children:(0,a.jsxs)("span",{className:"text-h3 font-bold",children:[n.$S," ",V]})})]}),a.jsx(x.iz,{className:"mt-2 mb-4"}),a.jsx(x.zx,{disabled:g||v,isLoading:g||v,onClick:Z,children:g?"Loading...":"Checkout"})]})}),a.jsx(x.OZ,{currentStepIdx:e,totalSteps:t,goToPreviousStep:l})]})},{})}],A=()=>{let{stepIdx:e}=(0,i.p)(),t=F[e]??{};return a.jsx("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)("div",{className:"container-fluid",children:[a.jsx(r.X,{children:t.title}),t.description&&a.jsx(r.x,{className:"text-base md:text-xl mt-4",children:t.description}),t.form]})})},z=()=>{if(!(0,l.O_)())return null;let e=localStorage.getItem(n.uf.STUD_LISTING_FORM_DATA),t=e?JSON.parse(e):{};return a.jsx(i.z,{totalSteps:F.length,initialData:t,onChangeData:e=>{localStorage.setItem(n.uf.STUD_LISTING_FORM_DATA,JSON.stringify(e))},validationSchemas:F.map(e=>e.validationSchema),children:a.jsx(A,{})})},O="force-dynamic";function R(){return a.jsx("section",{className:"pt-16 md:pt-20 4xl:pt-24",children:a.jsx("div",{className:"flex justify-center mt-10 lg:mt-14 h-[calc(100vh-64px)] md:h-[calc(100vh-80px)] 4xl:h-[calc(100vh-96px)]",children:a.jsx(z,{})})})}function T(){return a.jsx(f.Suspense,{fallback:null,children:a.jsx(R,{})})}},51746:(e,t,s)=>{"use strict";s.d(t,{M:()=>u});var a=s(57635);s(99744);var r=s(44537),i=s(89480),l=s(19064),n=s(21030),o=s(4014);function d({className:e,classNames:t,showOutsideDays:s=!0,...r}){return a.jsx(o._,{showOutsideDays:s,className:(0,l.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,n.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-neutral-500 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-neutral-100/50 [&:has([aria-selected])]:bg-neutral-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,n.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900 hover:text-neutral-50 focus:bg-neutral-900 focus:text-neutral-50",day_today:"bg-neutral-100 text-neutral-900",day_outside:"day-outside text-neutral-500 opacity-50 aria-selected:bg-neutral-100/50 aria-selected:text-neutral-500 aria-selected:opacity-30",day_disabled:"text-neutral-500 opacity-50",day_range_middle:"aria-selected:bg-neutral-100 aria-selected:text-neutral-900",day_hidden:"invisible",...t},...r})}d.displayName="Calendar";var c=s(13088),m=s(81201);function u({date:e,setDate:t,error:s,...o}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.J2,{children:[a.jsx(c.xo,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"outline",size:"lg",className:(0,l.cn)("w-full justify-start text-left font-normal px-4",!e&&"text-muted-foreground",s&&"border border-red-500"),children:[a.jsx(i.Z,{className:"mr-2 h-4 w-4"}),e?(0,r.WU)(e,"PPP"):a.jsx("span",{children:"Pick a date"})]})}),a.jsx(c.yk,{className:"w-auto p-0",children:a.jsx(d,{...o,mode:"single",selected:e,onSelect:t,initialFocus:!0})})]}),s&&a.jsx(m.cp,{size:"lg",error:s})]})}},62149:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>l,dynamic:()=>i});var r=s(1470);let e=await (0,r.createProxy)(String.raw`/home/runner/work/next-frontend/next-frontend/app/(pages)/create-listing/stud-listing/page.tsx`),i=e.dynamic,l=e.default;a()}catch(e){a(e)}},1)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9632,3288,4030,100,885,4208,3567,4679,1020,1755,3770,2466,9700,4792,2571,3309,301,4584,3972],()=>s(28807));module.exports=a})();