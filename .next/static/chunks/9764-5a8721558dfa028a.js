"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9764],{49764:function(e,t,s){s.d(t,{M:function(){return j}});var n=s(48622),a=s(23158),i=s(57938),r=s(54663),l=s(52426),o=s(67952),c=s(60062),u=s(96198),d=s(4007);async function m(){let{data:e}=await u.o.post("/auth/request-verify-email-code");return e}let f=()=>(0,d.D)({mutationFn:m});var p=s(16038);async function x(e){let{email:t,otp:s,userLoggedIn:n}=e,{data:a}=await u.o.post("/auth/verify-email-otp",{email:t,otp:s,userLoggedIn:n});return a}let g=()=>(0,d.D)({mutationFn:x});var h=s(75640),v=s(43121),y=s(84733),b=s(43515),w=s(49726);function j(e){let{noshow:t=!1}=e,[s,u]=(0,i.useState)(["","","","",""]),[d,m]=(0,i.useState)(""),[x,j]=(0,i.useState)("email"),[N,S]=(0,i.useState)(!1),I=(0,r.useRouter)(),T=(0,r.useSearchParams)(),{toast:E}=(0,c.pm)(),{mutate:_,isPending:A}=f(),{mutate:F,isPending:C}=(0,p.p)(),{mutate:D,isPending:P}=g(),{data:k}=(0,v.a)();(0,i.useEffect)(()=>{let e=T.get("email"),t=T.get("type");e?m(e):(null==k?void 0:k.email)&&(m(k.email),S(!0)),"password-reset"===t&&j("password-reset")},[T,null==k?void 0:k.email]);let O=(e,t)=>{let n=t.target.value;if(/^\d?$/.test(n)){let t=[...s];if(t[e]=n,u(t),n&&e<4){let t=document.getElementById("otp-input-".concat(e+1));t&&t.focus()}}},L=(e,t)=>{if("Backspace"===t.key&&!s[e]&&e>0){let t=document.getElementById("otp-input-".concat(e-1));t&&t.focus()}},R=async()=>{let e=s.join("");if(5!==e.length){E({title:"Invalid OTP",description:"Please enter a 5-digit code",variant:"destructive"});return}try{D({email:d,otp:e,userLoggedIn:N},{onSuccess:e=>{"password-reset"===x?(null==e?void 0:e.userId)?I.replace("/auth/reset-password?userId=".concat(null==e?void 0:e.userId,"&token=").concat(null==e?void 0:e.token)):E({title:"Verification Failed",description:"User ID not returned from server.",variant:"destructive"}):(E({title:"Email Verified",description:"Your email has been verified successfully!"}),I.replace(l.Z.auth.signIn))},onError:e=>{var t,s;E({title:"Verification Failed",description:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Invalid or expired OTP",variant:"destructive"})}})}catch(e){E({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"})}},M=(0,i.useCallback)(async()=>new Promise((e,t)=>{"password-reset"===x?F(d,{onSuccess:()=>{E({title:"Code Sent",description:"A new password reset code has been sent to your email"}),e(!0)},onError:e=>{t(e)}}):_(void 0,{onSuccess:()=>{E({title:"Code Sent",description:"A new verification code has been sent to your email"}),e(!0)},onError:e=>{t(e)}})}),[d,x,F,_,E]),{isPending:U,cooldownSeconds:G,error:V,handleResend:Z,resetCooldown:B,canResend:W}=(0,b.o)({onResend:M,onSuccess:()=>{},onError:e=>{let t=(0,h.v)(e);E({title:"Error",description:(null==t?void 0:t.message)||"Failed to send code",variant:"destructive"})},defaultCooldown:60});return(0,n.jsx)("section",{className:"flex p-10 h-screen container items-center justify-center max-md:p-4 max-3xl:h-auto max-md:!h-screen",children:(0,n.jsxs)("div",{className:"w-full bg-white rounded-max p-8 flex ".concat(t?"":"pl-0"," h-full max-md:p-4 max-md:rounded-40  max-h-[900px] relative max-md:!h-full"),children:[!t&&(0,n.jsx)("div",{className:"absolute left-10 top-8 max-md:top-4 max-md:left-4",children:(0,n.jsx)(w.Z,{})}),(0,n.jsxs)("div",{className:"".concat(t?"w-full mx-auto max-w-[600px]":"w-1/2 px-10"," h-full flex flex-col items-start text-xs max-md:w-full max-md:px-0 my-auto max-md:pt-4"),children:[(0,n.jsxs)("div",{className:"flex flex-col w-full my-auto",children:[(0,n.jsx)("span",{className:"w-[70px] h-[70px] rounded-full bg-[#F3F3F3] flex items-center justify-center",children:(0,n.jsx)("img",{src:"/images/vectors/mail.svg",alt:"Email icon"})}),(0,n.jsx)("span",{className:"text-[33px] font-medium flex leading-normal mt-3",children:"password-reset"===x?"Password Reset":"Email Verification"}),(0,n.jsx)("span",{className:"text-[#9C9C9C] text-sm mt-2",children:"password-reset"===x?"We have sent a code to ".concat(d):"We have sent a verification code to ".concat(d)}),(0,n.jsx)("div",{className:"flex gap-4 mt-6",children:s.map((e,t)=>(0,n.jsx)("input",{id:"otp-input-".concat(t),type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>O(t,e),onKeyDown:e=>L(t,e),className:"h-28 max-md:h-16 max-md:rounded-lg max-md:text-3xl w-full border-2 ".concat(e?"border-yellow-400":"border-[#D8DADC]"," focus:border-CSecondary focus:outline-none rounded-[27px] text-center text-[43px]"),autoFocus:0===t},t))}),(0,n.jsx)(o.f,{onClick:R,loading:P||C,className:"w-full h-16 bg-black text-white text-lg rounded-full mt-7 max-md:h-12 max-md:text-base",children:"password-reset"===x?"Continue":"Verify Email"}),(0,n.jsx)("span",{className:"text-gray-500 text-lg font-medium flex items-center justify-center text-center mt-4 space-x-1",children:G>0?(0,n.jsxs)("span",{className:"text-gray-600 ml-1",children:["(Resend available in ",(0,n.jsx)(y.F,{seconds:G,onComplete:B,className:"text-gray-800 font-semibold"}),")"]}):(0,n.jsxs)("span",{children:["I didn't receive a code",(0,n.jsx)("button",{onClick:Z,disabled:!W||U,className:"ml-1 text-gray-800 font-semibold underline decoration-2 underline-offset-2 hover:text-gray-900 transition-colors ".concat(!W||U?"opacity-50 cursor-not-allowed":""),children:U?"Sending...":"Resend"})]})})]}),!t&&(0,n.jsxs)("div",{className:"flex h-7 gap-4 w-1/2 items-center justify-center absolute bottom-8 left-0 max-md:w-full max-md:bottom-4",children:[(0,n.jsx)("span",{className:"w-3.5 h-3.5 bg-black rounded-full"}),(0,n.jsx)("span",{className:"w-3.5 h-3.5 bg-[#878484] rounded-full"}),(0,n.jsx)("span",{className:"w-3.5 h-3.5 bg-black rounded-full"}),(0,n.jsx)("span",{className:"w-3.5 h-3.5 bg-black rounded-full"})]})]}),!t&&(0,n.jsxs)("div",{className:"w-1/2 min-h-full bg-[#F5F5F5] rounded-40 flex flex-col items-center py-8 min-h-[810px] max-md:hidden",children:[(0,n.jsx)("span",{className:"w-44 flex",children:(0,n.jsx)(a.K7,{width:"100%",height:"100%"})}),(0,n.jsxs)("span",{className:"text-[45px] mt-8 relative",children:[(0,n.jsx)("img",{alt:"Paws decoration",className:"absolute -left-14 -top-7 w-[68px] h-[63px]",src:"/images/home/paws-indigo.svg"}),(0,n.jsx)("img",{alt:"Paws decoration",className:"absolute -right-10 -top-8 w-[51px] h-[48px]",src:"/images/home/paws-green.svg"}),"Welcome to ",(0,n.jsx)("strong",{className:"font-semibold",children:"Pups4Sale"})]}),(0,n.jsxs)("span",{className:"text-lg mt-1",children:["Join the ",(0,n.jsx)("strong",{className:"font-semibold",children:"largest community"})," of responsible ",(0,n.jsx)("strong",{className:"font-semibold",children:"pet lovers."})]}),(0,n.jsx)("img",{className:"mt-6",src:"/images/vectors/signUp.png",alt:"Sign up illustration"}),(0,n.jsxs)("div",{className:"flex flex-col w-full items-start px-8 gap-4",children:[(0,n.jsx)("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#F0EBF4] rounded-full",children:"Find your perfect furry companion"}),(0,n.jsx)("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#E7F5F7] rounded-full ml-auto",children:"Connect with trusted breeders & adopters"}),(0,n.jsx)("span",{className:"text-[17px] font-medium px-6 py-1 border border-[#00000033] bg-[#FCF4DC] rounded-full",children:"List puppies safely and easily"})]}),(0,n.jsxs)("span",{className:"text-5xl font-normal text-center mt-auto",children:[(0,n.jsx)("strong",{className:"font-semibold",children:"Start"}),"\xa0your\xa0",(0,n.jsxs)("strong",{className:"relative font-semibold",children:["journey",(0,n.jsx)("img",{className:"absolute right-0 -bottom-1 w-full",src:"/images/vectors/line-8.svg"})]}),"\xa0today!"]})]})]})})}},49726:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(48622),a=s(54663),i=s(52426);function r(e){let{fallbackRoute:t=i.Z.public.home,className:s=""}=e,r=(0,a.useRouter)();return(0,n.jsxs)("button",{onClick:()=>{window.history.length>1?r.back():r.push(t)},className:"flex items-center bg-[#F3F3F3] p-0.5 rounded-full pr-2 gap-1 font-medium text-xs cursor-pointer hover:bg-[#E5E5E5] transition-colors ".concat(s),children:[(0,n.jsx)("span",{className:"flex size-6 bg-black rounded-full items-center justify-center",children:(0,n.jsx)("img",{src:"/images/vectors/arrowLeftWhite.svg",alt:"Go back"})}),"Go Back"]})}},84733:function(e,t,s){s.d(t,{F:function(){return i}});var n=s(48622),a=s(57938);function i(e){let{seconds:t,onComplete:s,className:i="",showSeconds:r=!0}=e,[l,o]=(0,a.useState)(t);return((0,a.useEffect)(()=>{if(l<=0){null==s||s();return}let e=setInterval(()=>{o(e=>e<=1?(null==s||s(),0):e-1)},1e3);return()=>clearInterval(e)},[l,s]),l<=0)?null:(0,n.jsx)("span",{className:"font-medium ".concat(i),children:(e=>{let t=Math.floor(e/60);return r?"".concat(t,":").concat((e%60).toString().padStart(2,"0")):"".concat(t," min").concat(1!==t?"s":"")})(l)})}},67952:function(e,t,s){s.d(t,{f:function(){return o}});var n=s(48622),a=s(57938),i=s(91872),r=s(58384),l=s(83804);function o(e){let{children:t,loading:s=!1,loadingText:o="Loading...",onClick:c,variant:u="default",size:d="default",className:m,disabled:f,...p}=e,[x,g]=(0,a.useState)(!1),h=async e=>{if(c){g(!0);try{await c(e)}finally{g(!1)}}},v=s||x;return(0,n.jsxs)(i.z,{variant:u,size:d,disabled:f||v,onClick:h,className:(0,l.cn)("relative",m),...p,children:[v&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)(r.Z,{size:"sm",color:"current"})}),(0,n.jsx)("span",{className:(0,l.cn)(v&&"opacity-0"),children:v?o:t})]})}},8475:function(e,t,s){s.d(t,{$S:function(){return r},CT:function(){return a},uf:function(){return i}});var n=s(36653);let a="".concat(n.env.NEXT_PUBLIC_API_URL,"/api/v1"),i={PUPPY_LISTING_FORM_DATA:"puppy-listing-form-data",SEMEN_LISTING_FORM_DATA:"semen-listing-form-data",STUD_LISTING_FORM_DATA:"stud-listing-form-data",FUTURE_LISTING_FORM_DATA:"future-listing-form-data",WANTED_PUPPY_LISTING_FORM_DATA:"wanted-puppy-listing-form-data",OTHER_SERVICES_LISTING_FORM_DATA:"other-services-listing-form-data"},r="AUD"},52426:function(e,t,s){s.d(t,{Z:function(){return n}});let n={auth:{signIn:"/auth/sign-in",signUp:"/auth/sign-up",forgotPassword:"/auth/forgot-password"},public:{home:"/",terms:"/",notFound:"/404",explore:"/explore",wishlist:"/wishlist",emailVerificationSucess:"/auth/verify-email-success",exploreDetail:"/exploreDetail",startlisting:"/startlisting",startlistingform:"/startlistingform",meetings:"/meetings",meetingslist:"/meetingslist",contact:"/contact",blog:"/blog",blogDetail:"/blog-detail",createListing:{puppyListing:"/create-listing/puppy-listing",semenListing:"/create-listing/semen-listing",studListing:"/create-listing/stud-listing",futureListing:"/create-listing/future-listing",wantedPuppyListing:"/create-listing/wanted-puppy-listing",otherServicesListing:"/create-listing/other-services-listing"},userID:e=>"/user/".concat(e)},private:{account:"/account",meetings:"/account/meetings",profile:"/account/profile",addListing:"/add-listing",dashboard:"/account",inbox:"/account/inbox",listings:"/account/listings",reservations:"/account/reservations",accountSettings:"/account/settings",trips:"/trips",wishlist:"/wishlist"}}},43515:function(e,t,s){s.d(t,{o:function(){return i}});var n=s(57938),a=s(75640);function i(e){let{onResend:t,onSuccess:s,onError:i,defaultCooldown:r=60}=e,[l,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)(r),[d,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(c<=0)return;let e=setInterval(()=>{u(e=>e<=1?0:e-1)},1e3);return()=>clearInterval(e)},[c]);let f=e=>{let t=e.match(/(\d+)\s+seconds?/i);if(t)return parseInt(t[1]);let s=e.match(/(\d+)\s+minutes?/i);return s?60*parseInt(s[1]):r},p=(0,n.useCallback)(async()=>{if(!(c>0)){o(!0),m(null);try{await t(),null==s||s(),u(r)}catch(s){let e=(0,a.v)(s),t=(null==e?void 0:e.message)||"Something went wrong";if(t.toLowerCase().includes("wait")&&(t.includes("seconds")||t.includes("minutes"))){let e=f(t);u(e),m("Please wait ".concat(e," seconds before trying again"))}else m(t);null==i||i(s)}finally{o(!1)}}},[t,s,i,c,r]);return{isPending:l,cooldownSeconds:c,error:d,handleResend:p,resetCooldown:(0,n.useCallback)(()=>{u(0),m(null)},[]),canResend:0===c&&!l}}},60062:function(e,t,s){s.d(t,{Am:function(){return d},pm:function(){return m}});var n=s(57938);let a=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function u(e){c=l(c,e),o.forEach(e=>{e(c)})}function d(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=n.useState(c);return n.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},96198:function(e,t,s){s.d(t,{o:function(){return a}});var n=s(8475);let a=s(95156).default.create({baseURL:n.CT,withCredentials:!0})},16038:function(e,t,s){s.d(t,{p:function(){return r}});var n=s(96198),a=s(4007);async function i(e){let{data:t}=await n.o.post("/auth/forgot-password",{email:e});return t}let r=()=>(0,a.D)({mutationFn:i})},43121:function(e,t,s){s.d(t,{a:function(){return r}});var n=s(96198),a=s(41993);async function i(){try{let{data:e}=await n.o.get("/users/me");return e}catch(e){return null}}let r=()=>(0,a.a)({queryKey:["current-user"],queryFn:i,retry:!1,staleTime:0})},83804:function(e,t,s){s.d(t,{BX:function(){return o},SI:function(){return l},cn:function(){return a},p3:function(){return i},qh:function(){return r}});var n=s(32891);let a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.Z)(t)},i=e=>{if(!(null==e||isNaN(+e))){if("number"==typeof e)return e;if("string"==typeof e)return+e}},r=e=>null!=e&&"number"==typeof+e&&!isNaN(+e),l=e=>0===Object.keys(e).length,o=e=>0===Object.keys(e).length||Object.values(e).every(e=>!e)},75640:function(e,t,s){s.d(t,{v:function(){return a}});var n=s(56907);let a=e=>{var t;if((0,n.IZ)(e))return null===(t=e.response)||void 0===t?void 0:t.data}}}]);