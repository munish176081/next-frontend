(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4797],{51e3:function(e,l,s){Promise.resolve().then(s.bind(s,61667))},61667:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return Z},dynamic:function(){return F}});var a=s(48622),r=s(68843),n=s(69700),i=s(31552),t=s(8475),d=s(43413),c=s(96287),o=s(16140),u=s(81910),m=s(52853),x=s(44448),p=s(23172),g=s(46834),h=s(76771),b=s(57938),v=s(83804),f=s(38952),j=s(50386),N=s(82021);let y=c.Ry({title:c.Z_({message:"Please enter title"}).min(1,{message:"Please enter title"}),breed:c.Z_({message:"Please select breed"}).min(1,{message:"Please select breed"}),isHealthCeritificateRequired:c.Km(["required","optional"],{message:"Please select health certificate preference"}),isAnkcNumberRequired:c.Km(["required","optional"],{message:"Please select ANKC number preference"}),budget:c.oQ.number().min(1,{message:"Please enter your budget"}).max(1e8,{message:"Please enter your budget"}),minAge:f.gf,maxAge:f.gf,genderPreference:c.Km(["male","female"],{message:"Please select gender preference"}),referenceImages:(0,f.NY)({maxFileSize:1048576,maxImages:10,minImages:1}),referenceVideoUrls:c.IX(f.jN).optional().default([])});var I=s(19491),k=s(52426),w=s(63852),C=s(75640),A=s(60062),S=s(89127),P=s(54663),R=s(91269),q=s(18610);let D=(e,l)=>"".concat(e,"@").concat(l),_=e=>{let[l,s]=e.split("@");return{adIdx:Number(l),productIdx:Number(s)}},L=[{title:"Wanted puppy Listing",description:"Create a new Wanted Puppy listing",form:(0,a.jsx)(()=>{var e,l,s,r,i,t,d,c,f,I,k,w,C,A,S,P;let{stepIdx:R,totalSteps:q,formData:D,goToNextStep:_,goToPreviousStep:L,appendFormData:U}=(0,n.p)(),{handleSubmit:V,watch:F,register:O,control:Z,formState:{errors:z}}=(0,o.cI)({defaultValues:{title:D.title,breed:D.breed,isHealthCeritificateRequired:D.isHealthCeritificateRequired,isAnkcNumberRequired:D.isAnkcNumberRequired,budget:D.budget,minAge:D.minAge,maxAge:D.maxAge,genderPreference:D.genderPreference,referenceImages:D.referenceImages,referenceVideoUrls:D.referenceVideoUrls},mode:"onChange",resolver:(0,u.F)(y)}),Q=F();return console.log(Q),(0,b.useEffect)(()=>{(0,v.SI)(Q)||U(Q)},[Q,U]),(0,a.jsxs)("form",{className:"pt-10 pb-28",noValidate:!0,onSubmit:V(e=>{_(e)}),children:[(0,a.jsx)(m.II,{type:"text",label:"Listing title",className:"mb-4",error:null==z?void 0:null===(e=z.title)||void 0===e?void 0:e.message,required:!0,...O("title")}),(0,a.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-start justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(o.Qr,{name:"breed",control:Z,render:e=>{var l;let{field:s}=e;return(0,a.jsx)(x.hQ,{label:"Desired breed",value:s.value,setValue:e=>s.onChange(e),options:p.AW.map(e=>({value:e.value,label:e.label})),btnClassName:"w-full active:!scale-100",popoverClassName:"w-[--radix-popover-trigger-width] ",error:null==z?void 0:null===(l=z.breed)||void 0===l?void 0:l.message})}})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(o.Qr,{name:"genderPreference",control:Z,render:e=>{let{field:l}=e;return(0,a.jsxs)("label",{className:"block flex-1",children:[(0,a.jsx)("span",{className:"block text-sm font-bold mb-1.5",children:"Gender Preference"}),(0,a.jsxs)(j.Ph,{value:l.value,onValueChange:l.onChange,children:[(0,a.jsx)(j.i4,{className:"h-10 sm:h-12",children:(0,a.jsx)(j.ki,{placeholder:"Select gender"})}),(0,a.jsxs)(j.Bw,{className:"h-20",children:[(0,a.jsx)(j.Ql,{value:"male",children:"Male"}),(0,a.jsx)(j.Ql,{value:"female",children:"Female"})]})]})]})}}),(null===(l=z.genderPreference)||void 0===l?void 0:l.message)&&(0,a.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==z?void 0:null===(s=z.genderPreference)||void 0===s?void 0:s.message})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-bold mb-2",children:"Age Range"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(m.II,{type:"number",label:"Min Age",className:"flex-1",error:null==z?void 0:null===(r=z.minAge)||void 0===r?void 0:r.message,required:!0,...O("minAge")}),(0,a.jsx)(m.II,{type:"number",label:"Max Age",className:"flex-1",error:null==z?void 0:null===(i=z.maxAge)||void 0===i?void 0:i.message,required:!0,...O("maxAge")})]})]}),(0,a.jsxs)("label",{className:"block mb-4 flex-1",children:[(0,a.jsx)("span",{className:"block text-sm font-bold mb-1.5",children:"Health Certificate Preference"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(N.Z,{labelClassName:"flex-1",className:"card-gradient cursor-pointer rounded-lg border border-gray-lighter py-4 text-center lg:rounded-xl xl:p-6 xl:text-left",inputClassName:"[&:checked:enabled~span]:ring-1 [&:checked:enabled~span]:ring-gray-lighter [&:checked:enabled~span]:border [&:checked:enabled~span]:border-gray-dark",value:"required",...O("isHealthCeritificateRequired"),children:(0,a.jsx)("p",{children:"Required"})}),(0,a.jsx)(N.Z,{labelClassName:"flex-1",className:"card-gradient cursor-pointer rounded-lg border border-gray-lighter py-4 text-center lg:rounded-xl xl:p-6 xl:text-left",inputClassName:"[&:checked:enabled~span]:ring-1 [&:checked:enabled~span]:ring-gray-lighter [&:checked:enabled~span]:border [&:checked:enabled~span]:border-gray-dark",value:"optional",...O("isHealthCeritificateRequired"),children:(0,a.jsx)("p",{children:"Optional"})})]})]}),(null===(t=z.isHealthCeritificateRequired)||void 0===t?void 0:t.message)&&(0,a.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==z?void 0:null===(d=z.isHealthCeritificateRequired)||void 0===d?void 0:d.message}),(0,a.jsxs)("label",{className:"block mb-4 flex-1",children:[(0,a.jsx)("span",{className:"block text-sm font-bold mb-1.5",children:"ANKC / State Breeder Registration Number Requirement"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(N.Z,{labelClassName:"flex-1",className:"card-gradient cursor-pointer rounded-lg border border-gray-lighter py-4 text-center lg:rounded-xl xl:p-6 xl:text-left",inputClassName:"[&:checked:enabled~span]:ring-1 [&:checked:enabled~span]:ring-gray-lighter [&:checked:enabled~span]:border [&:checked:enabled~span]:border-gray-dark",value:"required",...O("isAnkcNumberRequired"),children:(0,a.jsx)("p",{children:"Required"})}),(0,a.jsx)(N.Z,{labelClassName:"flex-1",className:"card-gradient cursor-pointer rounded-lg border border-gray-lighter py-4 text-center lg:rounded-xl xl:p-6 xl:text-left",inputClassName:"[&:checked:enabled~span]:ring-1 [&:checked:enabled~span]:ring-gray-lighter [&:checked:enabled~span]:border [&:checked:enabled~span]:border-gray-dark",value:"optional",...O("isAnkcNumberRequired"),children:(0,a.jsx)("p",{children:"Optional"})})]})]}),(null===(c=z.isAnkcNumberRequired)||void 0===c?void 0:c.message)&&(0,a.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==z?void 0:null===(f=z.isAnkcNumberRequired)||void 0===f?void 0:f.message}),(0,a.jsx)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:(0,a.jsx)(m.II,{type:"number",label:"Budget",className:"flex-1",error:null==z?void 0:null===(I=z.budget)||void 0===I?void 0:I.message,required:!0,...O("budget")})}),(0,a.jsx)(o.Qr,{name:"referenceImages",control:Z,render:e=>{let{field:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.b,{label:"Upload reference wanted puppy images",accept:"image/*",multiple:!0,onChange:e=>{var s;l.onChange([...null!==(s=l.value)&&void 0!==s?s:[],...Array.from(e)])}}),l.value&&(0,a.jsx)(h.e,{className:"mb-4",images:l.value.map((e,l)=>{var s,a;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==z?void 0:null===(a=z.referenceImages)||void 0===a?void 0:null===(s=a[l])||void 0===s?void 0:s.message}}),onDelete:e=>{l.value.splice(e,1),l.onChange(l.value)}})]})}}),(null==z?void 0:z.referenceImages)&&(0,a.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==z?void 0:null===(k=z.referenceImages)||void 0===k?void 0:k.message}),(0,a.jsx)(o.Qr,{name:"referenceVideoUrls",control:Z,render:e=>{var l,s,r;let{field:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.II,{type:"text",label:"Enter reference wanted puppy video URLs (comma separated)",className:"flex-1 mb-4",error:null==z?void 0:null===(l=z.referenceVideoUrls)||void 0===l?void 0:l.message,required:!0,value:null!==(r=null===(s=n.value)||void 0===s?void 0:s.join(","))&&void 0!==r?r:"",onChange:e=>{let l=e.target.value;n.onChange(l?l.split(","):[])}})})}}),(null==z?void 0:null===(w=z.referenceVideoUrls)||void 0===w?void 0:w.length)&&(null==z?void 0:null===(C=z.referenceVideoUrls)||void 0===C?void 0:C.length)>0&&(0,a.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==z?void 0:null===(P=z.referenceVideoUrls)||void 0===P?void 0:null===(S=P.find)||void 0===S?void 0:null===(A=S.call(P,e=>!!(null==e?void 0:e.message)))||void 0===A?void 0:A.message}),(0,a.jsx)(x.OZ,{currentStepIdx:R,totalSteps:q,goToPreviousStep:L})]})},{}),validationSchema:y},{title:"Contact Information",description:"",form:(0,a.jsx)(d.b,{}),validationSchema:d.R},{title:"Checkout",description:"",form:(0,a.jsx)(()=>{var e,l,s;let{stepIdx:i,totalSteps:d,getFormData:c,goToPreviousStep:o,appendFormData:u,replaceFormData:m}=(0,n.p)(),{data:p,isLoading:g}=(0,R.X)("wanted_puppy"),h=null!==(l=null==p?void 0:p.products)&&void 0!==l?l:[],{data:v=[]}=(0,q.x)("wanted_puppy"),{mutateAsync:f,isPending:N}=(0,w.Pl)(),{mutateAsync:y,isPending:L}=(0,S.f)(),U=(0,P.useRouter)(),[V,F]=(0,b.useState)(0),[O,Z]=(0,b.useState)(void 0),z=h[V],Q=O?_(O):void 0,T=Q?v[Q.adIdx]:void 0,H=Q?null==T?void 0:null===(e=T.products)||void 0===e?void 0:e[Q.productIdx]:void 0,E=(null!==(s=null==z?void 0:z.price)&&void 0!==s?s:0)+(H?H.price:0),B=async e=>{try{let{checkoutUrl:l}=await y(e);m({}),U.push(l)}catch(s){var l;console.error(s);let e=(0,C.v)(s);(0,A.Am)({title:"Failed to create checkout link",description:null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Something went wrong"})}},K=async()=>{if(!z){(0,A.Am)({title:"Failed!",description:"Please select a listing duration"});return}if(T&&H&&z.durationInDays<H.durationInDays){(0,A.Am)({title:"Failed!",description:"Ad duration is greater than listing duration"});return}let e=c();if(e.listingId){B({listingId:e.listingId,durationInDays:z.durationInDays,adId:null==T?void 0:T.id,adDurationInDays:null==H?void 0:H.durationInDays});return}try{let l=await f({type:"wanted_puppy",fields:e});u({listingId:l.id}),await B({listingId:l.id,durationInDays:z.durationInDays,adId:null==T?void 0:T.id,adDurationInDays:null==H?void 0:H.durationInDays})}catch(s){var l;console.error(s);let e=(0,C.v)(s);(0,A.Am)({title:"Failed!",description:null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Something went wrong"})}};return(0,a.jsxs)("div",{className:"mt-6 pb-40",children:[(0,a.jsx)(I.RequireUser,{className:"max-w-full",successRedirect:"".concat(k.Z.public.createListing.wantedPuppyListing,"?step=").concat(i+1),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"text-h5",children:[(0,a.jsx)("span",{className:"mb-2 block font-bold",children:"Listing Duration"}),g?"Loading...":(0,a.jsxs)(j.Ph,{disabled:h.length<=1,onValueChange:e=>{F(Number(e))},value:V.toString(),children:[(0,a.jsx)(j.i4,{disabled:h.length<=1,className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,a.jsx)(j.ki,{placeholder:"Select wanted puppy listing"})}),(0,a.jsx)(j.Bw,{children:h.map((e,l)=>(0,a.jsx)(j.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:l.toString(),children:(0,a.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,a.jsx)(r.X,{tag:"h3",children:e.title}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Duration"," ",(0,a.jsx)("span",{className:"text-gray-light font-bold",children:e.durationInDays})," ","days"]}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Price"," ",(0,a.jsx)("span",{className:"font-bold",children:e.price})," ",t.$S," "]})]})},l.toString()))})]})]}),v.length>0&&(0,a.jsxs)("label",{className:"text-h5",children:[(0,a.jsx)("span",{className:"mb-2 block font-bold",children:"Select Ad"}),(0,a.jsxs)(j.Ph,{onValueChange:e=>{Z(e)},value:O,children:[(0,a.jsx)(j.i4,{className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,a.jsx)(j.ki,{placeholder:"Select ad"})}),(0,a.jsxs)(j.Bw,{children:[O&&(0,a.jsx)(x.zx,{className:"w-full p-4",variant:"ghost",onClick:e=>{e.stopPropagation(),Z(void 0)},children:"Clear"}),v.map((e,l)=>e.products.map((s,n)=>(0,a.jsx)(j.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:D(l,n),children:(0,a.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,a.jsx)(r.X,{tag:"h3",children:e.title}),(0,a.jsx)(r.x,{children:s.description}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Duration"," ",(0,a.jsx)("span",{className:"text-gray-light font-bold",children:s.durationInDays})," ","days"]}),(0,a.jsxs)(r.x,{className:"mt-3",children:["Price"," ",(0,a.jsx)("span",{className:"font-bold",children:s.price})," ",t.$S]})]})},D(l,n))))]})]},O)]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,a.jsxs)(r.x,{children:["Listing (",null==z?void 0:z.durationInDays," days)"]}),(0,a.jsx)(r.x,{children:(0,a.jsxs)("span",{className:"text-h4 font-bold",children:[t.$S," ",null==z?void 0:z.price]})})]}),T&&H&&(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.x,{children:["Ad ",null==T?void 0:T.title," (",H.durationInDays," ","days)"]}),(0,a.jsx)(r.x,{className:"text-sm",children:H.description})]}),(0,a.jsx)(r.x,{children:(0,a.jsxs)("span",{className:"text-h4 font-bold",children:[t.$S," ",H.price]})})]}),(0,a.jsx)(x.iz,{className:"mb-2 mt-4"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(r.x,{children:"Total"}),(0,a.jsx)(r.x,{children:(0,a.jsxs)("span",{className:"text-h3 font-bold",children:[t.$S," ",E]})})]}),(0,a.jsx)(x.iz,{className:"mt-2 mb-4"}),(0,a.jsx)(x.zx,{disabled:N||L,isLoading:N||L,onClick:K,children:N?"Loading...":"Checkout"})]})}),(0,a.jsx)(x.OZ,{currentStepIdx:i,totalSteps:d,goToPreviousStep:o})]})},{})}],U=()=>{var e;let{stepIdx:l}=(0,n.p)(),s=null!==(e=L[l])&&void 0!==e?e:{};return(0,a.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsx)(r.X,{children:s.title}),s.description&&(0,a.jsx)(r.x,{className:"text-base md:text-xl mt-4",children:s.description}),s.form]})})},V=()=>{if(!(0,i.O_)())return null;let e=localStorage.getItem(t.uf.WANTED_PUPPY_LISTING_FORM_DATA),l=e?JSON.parse(e):{};return(0,a.jsx)(n.z,{totalSteps:L.length,initialData:l,onChangeData:e=>{localStorage.setItem(t.uf.WANTED_PUPPY_LISTING_FORM_DATA,JSON.stringify(e))},validationSchemas:L.map(e=>e.validationSchema),children:(0,a.jsx)(U,{})})},F="force-dynamic";function O(){return(0,a.jsx)("section",{className:"pt-16 md:pt-20 4xl:pt-24",children:(0,a.jsx)("div",{className:"flex justify-center mt-10 lg:mt-14 h-[calc(100vh-64px)] md:h-[calc(100vh-80px)] 4xl:h-[calc(100vh-96px)]",children:(0,a.jsx)(V,{})})})}function Z(){return(0,a.jsx)(b.Suspense,{fallback:null,children:(0,a.jsx)(O,{})})}},82021:function(e,l,s){"use strict";var a=s(48622),r=s(57938),n=s(32891);let i=(0,r.forwardRef)((e,l)=>{let{children:s,className:r,inputClassName:i,labelClassName:t,...d}=e;return(0,a.jsxs)("label",{className:t,children:[(0,a.jsx)("input",{type:"radio",ref:l,className:(0,n.Z)("peer hidden",i),...d}),(0,a.jsx)("span",{className:(0,n.Z)("block",r),children:s})]})});i.displayName="AdvancedRadio",l.Z=i}},function(e){e.O(0,[1525,9618,8029,328,1993,8278,5880,2647,1910,6899,1509,2290,9770,5846,9570,4448,9764,7741,7476,8805,2351,1744],function(){return e(e.s=51e3)}),_N_E=e.O()}]);