(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4522],{50221:function(e,a,t){Promise.resolve().then(t.bind(t,74530))},74530:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return q},dynamic:function(){return T}});var l=t(48622),s=t(68843),i=t(69700),r=t(31552),n=t(8475),d=t(96287),o=t(16140),c=t(81910),u=t(52853),m=t(44448),x=t(23172),p=t(46834),v=t(76771),h=t(57938),f=t(83804),b=t(44558),g=t(38952);let j=d.Ry({title:d.Z_({message:"Please enter title"}).min(1,{message:"Please enter title"}),breed:d.Z_({message:"Please select breed"}).min(1,{message:"Please select breed"}),expectedDueDate:d.oQ.date({message:"Please enter date of birth"}).refine(e=>e>=new Date,{message:"Date should not be in the past."}),reservationFee:d.oQ.number().min(1,{message:"Please enter reservation fee"}).max(1e8,{message:"Please enter valid reservation fee"}),pricePerPuppy:d.oQ.number().min(1,{message:"Please enter fee"}).max(1e8,{message:"Please enter valid future fee"}),expectedNumberOfPuppies:d.oQ.number({message:"Please enter expected number of puppies"}).int({message:"please enter valid number"}).min(1,{message:"Atleast 1 is required"}),availibilityDate:d.oQ.date({message:"Please enter availibity date"}).refine(e=>e>=new Date,{message:"Date should be in the future."}),images:(0,g.NY)({maxFileSize:1048576,maxImages:10,minImages:0}).optional().default([]),videoUrls:d.IX(g.jN).optional().default([])});var y=t(50386),N=t(19491),I=t(52426),D=t(63852),w=t(75640),P=t(60062),S=t(89127),C=t(54663),_=t(91269),k=t(18610);let F=(e,a)=>"".concat(e,"@").concat(a),O=e=>{let[a,t]=e.split("@");return{adIdx:Number(a),productIdx:Number(t)}};var A=t(43413);let U=d.Ry({parentDetails:d.Ry({name:d.Z_({message:"Please enter parent name"}).min(1,{message:"Please enter parent name"}),dateOfBirth:d.oQ.date({message:"Please enter parent date of birth"}).refine(e=>e<=new Date,{message:"Please enter parent date of birth"}),healthCertificatesText:d.Z_({message:"Please enter parent health certificates"}).optional(),healthCertificatesImages:(0,g.NY)({maxFileSize:1048576,maxImages:3,minImages:0}).optional().default([]),ankcNumber:d.Z_({message:"Please enter ANKC number"}).min(1,{message:"Please enter ANKC number"})})}),L=[{title:"Future Listing",description:"Create a new future listing",form:(0,l.jsx)(()=>{var e,a,t,s,r,n,d,g,y,N;let{stepIdx:I,totalSteps:D,formData:w,goToNextStep:P,goToPreviousStep:S,appendFormData:C}=(0,i.p)(),{handleSubmit:_,watch:k,register:F,control:O,formState:{errors:A}}=(0,o.cI)({defaultValues:{title:w.title,breed:w.breed,expectedDueDate:w.expectedDueDate,pricePerPuppy:w.pricePerPuppy,reservationFee:w.reservationFee,availibilityDate:w.availibilityDate,expectedNumberOfPuppies:w.expectedNumberOfPuppies,images:w.images,videoUrls:w.videoUrls},mode:"onChange",resolver:(0,c.F)(j)}),U=k();return(0,h.useEffect)(()=>{(0,f.SI)(U)||C(U)},[U,C]),(0,l.jsxs)("form",{className:"pt-10 pb-28",noValidate:!0,onSubmit:_(e=>{P(e)}),children:[(0,l.jsx)(u.II,{type:"text",label:"Listing title",className:"mb-4",error:null==A?void 0:null===(e=A.title)||void 0===e?void 0:e.message,required:!0,...F("title")}),(0,l.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-start justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(o.Qr,{name:"breed",control:O,render:e=>{var a;let{field:t}=e;return(0,l.jsx)(m.hQ,{label:"Select breed",value:t.value,setValue:e=>t.onChange(e),options:x.AW.map(e=>({value:e.value,label:e.label})),btnClassName:"w-full active:!scale-100",popoverClassName:"w-[--radix-popover-trigger-width] ",error:null==A?void 0:null===(a=A.breed)||void 0===a?void 0:a.message})}})}),(0,l.jsx)(o.Qr,{name:"expectedDueDate",control:O,render:e=>{var a;let{field:t}=e;return(0,l.jsxs)("label",{className:"flex-1",children:[(0,l.jsx)("span",{className:"mb-2 block font-bold text-sm",children:"Expected Due Date"}),(0,l.jsx)(b.M,{mode:"single",date:t.value,setDate:e=>{t.onChange(e)},error:null==A?void 0:null===(a=A.expectedDueDate)||void 0===a?void 0:a.message,disabled:{before:new Date}})]})}})]}),(0,l.jsx)(u.II,{type:"number",label:"Reservation Fee",error:null==A?void 0:null===(a=A.reservationFee)||void 0===a?void 0:a.message,className:"mb-4",required:!0,...F("reservationFee")}),(0,l.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[(0,l.jsx)(u.II,{type:"number",label:"Expected Number of puppies",className:"flex-1",error:null==A?void 0:null===(t=A.expectedNumberOfPuppies)||void 0===t?void 0:t.message,required:!0,...F("expectedNumberOfPuppies")}),(0,l.jsx)(u.II,{type:"number",label:"Price per puppy",className:"flex-1",error:null==A?void 0:null===(s=A.pricePerPuppy)||void 0===s?void 0:s.message,required:!0,...F("pricePerPuppy")})]}),(0,l.jsx)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:(0,l.jsx)(o.Qr,{name:"availibilityDate",control:O,render:e=>{var a;let{field:t}=e;return(0,l.jsxs)("label",{className:"flex-1",children:[(0,l.jsx)("span",{className:"block font-bold text-sm mb-1.5",children:"Availibility date"}),(0,l.jsx)(b.M,{mode:"single",date:t.value,setDate:e=>{t.onChange(e)},error:null==A?void 0:null===(a=A.availibilityDate)||void 0===a?void 0:a.message,disabled:{before:new Date}})]})}})}),(0,l.jsx)(o.Qr,{name:"images",control:O,render:e=>{let{field:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.b,{label:"Upload previous Litters images",accept:"image/*",multiple:!0,onChange:e=>{var t;a.onChange([...null!==(t=a.value)&&void 0!==t?t:[],...Array.from(e)])}}),a.value&&(0,l.jsx)(v.e,{className:"mb-4",images:a.value.map((e,a)=>{var t,l;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==A?void 0:null===(l=A.images)||void 0===l?void 0:null===(t=l[a])||void 0===t?void 0:t.message}}),onDelete:e=>{a.value.splice(e,1),a.onChange(a.value)}})]})}}),(null==A?void 0:A.images)&&(0,l.jsx)(u.cp,{className:"mb-4",size:"lg",error:null==A?void 0:null===(r=A.images)||void 0===r?void 0:r.message}),(0,l.jsx)(o.Qr,{name:"videoUrls",control:O,render:e=>{var a,t,s;let{field:i}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.II,{type:"text",label:"Enter previous litter video URLs (comma separated)",className:"flex-1 mb-4",error:null==A?void 0:null===(a=A.videoUrls)||void 0===a?void 0:a.message,required:!0,value:null!==(s=null===(t=i.value)||void 0===t?void 0:t.join(","))&&void 0!==s?s:"",onChange:e=>{let a=e.target.value;i.onChange(a?a.split(","):[])}})})}}),(null==A?void 0:null===(n=A.videoUrls)||void 0===n?void 0:n.length)&&(null==A?void 0:null===(d=A.videoUrls)||void 0===d?void 0:d.length)>0&&(0,l.jsx)(u.cp,{className:"mb-4",size:"lg",error:null==A?void 0:null===(N=A.videoUrls)||void 0===N?void 0:null===(y=N.find)||void 0===y?void 0:null===(g=y.call(N,e=>!!(null==e?void 0:e.message)))||void 0===g?void 0:g.message}),(0,l.jsx)(m.OZ,{currentStepIdx:I,totalSteps:D,goToPreviousStep:S})]})},{}),validationSchema:j},{title:"Parent Details",description:"Please enter parent details",form:(0,l.jsx)(()=>{var e,a,t,s,r;let{stepIdx:n,totalSteps:d,formData:x,goToNextStep:g,goToPreviousStep:j,appendFormData:y}=(0,i.p)(),N=null!==(r=null==x?void 0:x.parentDetails)&&void 0!==r?r:{},{handleSubmit:I,watch:D,register:w,control:P,formState:{errors:{parentDetails:S={}}}}=(0,o.cI)({defaultValues:{parentDetails:{name:N.name,dateOfBirth:N.dateOfBirth,healthCertificatesText:N.healthCertificatesText,healthCertificatesImages:N.healthCertificatesImages,ankcNumber:N.ankcNumber}},mode:"onChange",resolver:(0,c.F)(U)}),C=D();return(0,h.useEffect)(()=>{(0,f.SI)(C)||y(C)},[C,y]),(0,l.jsxs)("form",{className:"pt-10 pb-28",noValidate:!0,onSubmit:I(e=>{g(e)}),children:[(0,l.jsx)(u.II,{type:"text",label:"Name",className:"mb-4",error:null==S?void 0:null===(e=S.name)||void 0===e?void 0:e.message,required:!0,...w("parentDetails.name")}),(0,l.jsx)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-start justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:(0,l.jsx)(o.Qr,{name:"parentDetails.dateOfBirth",control:P,render:e=>{var a;let{field:t}=e;return(0,l.jsxs)("label",{className:"flex-1",children:[(0,l.jsx)("span",{className:"mb-2 block font-bold text-sm",children:"Date of birth"}),(0,l.jsx)(b.M,{mode:"single",date:t.value,setDate:e=>{t.onChange(e)},error:null==S?void 0:null===(a=S.dateOfBirth)||void 0===a?void 0:a.message,disabled:{after:new Date}})]})}})}),(0,l.jsx)(u.II,{type:"text",label:"ANKC / State Breeder Registration Number",className:"my-4",error:null==S?void 0:null===(a=S.ankcNumber)||void 0===a?void 0:a.message,required:!0,...w("parentDetails.ankcNumber")}),(0,l.jsx)(u.II,{type:"text",label:"Health certificate",className:"mb-4",error:null==S?void 0:null===(t=S.healthCertificatesText)||void 0===t?void 0:t.message,required:!0,...w("parentDetails.healthCertificatesText")}),(0,l.jsx)(o.Qr,{name:"parentDetails.healthCertificatesImages",control:P,render:e=>{let{field:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.b,{label:"Upload health certificates",accept:"image/*",multiple:!0,onChange:e=>{var t;a.onChange([...null!==(t=a.value)&&void 0!==t?t:[],...Array.from(e)])}}),a.value&&(0,l.jsx)(v.e,{className:"mb-4",images:a.value.map((e,a)=>{var t,l;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==S?void 0:null===(l=S.healthCertificatesImages)||void 0===l?void 0:null===(t=l[a])||void 0===t?void 0:t.message}}),onDelete:e=>{a.value.splice(e,1),a.onChange(a.value)}})]})}}),(null==S?void 0:S.healthCertificatesImages)&&(0,l.jsx)(u.cp,{className:"mb-4",size:"lg",error:null==S?void 0:null===(s=S.healthCertificatesImages)||void 0===s?void 0:s.message}),(0,l.jsx)(m.OZ,{currentStepIdx:n,totalSteps:d,goToPreviousStep:j})]})},{}),validationSchema:U},{title:"Contact Information",description:"",form:(0,l.jsx)(A.b,{}),validationSchema:A.R},{title:"Checkout",description:"",form:(0,l.jsx)(()=>{var e,a,t;let{stepIdx:r,totalSteps:d,getFormData:o,goToPreviousStep:c,appendFormData:u,replaceFormData:x}=(0,i.p)(),{data:p,isLoading:v}=(0,_.X)("future"),f=null!==(a=null==p?void 0:p.products)&&void 0!==a?a:[],{data:b=[]}=(0,k.x)("future"),{mutateAsync:g,isPending:j}=(0,D.Pl)(),{mutateAsync:A,isPending:U}=(0,S.f)(),L=(0,C.useRouter)(),[R,Q]=(0,h.useState)(0),[T,z]=(0,h.useState)(void 0),q=f[R],E=T?O(T):void 0,Z=E?b[E.adIdx]:void 0,B=E?null==Z?void 0:null===(e=Z.products)||void 0===e?void 0:e[E.productIdx]:void 0,V=(null!==(t=null==q?void 0:q.price)&&void 0!==t?t:0)+(B?B.price:0),M=async e=>{try{let{checkoutUrl:a}=await A(e);x({}),L.push(a)}catch(t){var a;console.error(t);let e=(0,w.v)(t);(0,P.Am)({title:"Failed to create checkout link",description:null!==(a=null==e?void 0:e.message)&&void 0!==a?a:"Something went wrong"})}},X=async()=>{if(!q){(0,P.Am)({title:"Failed!",description:"Please select a listing duration"});return}if(Z&&B&&q.durationInDays<B.durationInDays){(0,P.Am)({title:"Failed!",description:"Ad duration is greater than listing duration"});return}let e=o();if(e.listingId){M({listingId:e.listingId,durationInDays:q.durationInDays,adId:null==Z?void 0:Z.id,adDurationInDays:null==B?void 0:B.durationInDays});return}try{let a=await g({type:"future",fields:e});u({listingId:a.id}),await M({listingId:a.id,durationInDays:q.durationInDays,adId:null==Z?void 0:Z.id,adDurationInDays:null==B?void 0:B.durationInDays})}catch(t){var a;console.error(t);let e=(0,w.v)(t);(0,P.Am)({title:"Failed!",description:null!==(a=null==e?void 0:e.message)&&void 0!==a?a:"Something went wrong"})}};return(0,l.jsxs)("div",{className:"mt-6 pb-40",children:[(0,l.jsx)(N.RequireUser,{className:"max-w-full",successRedirect:"".concat(I.Z.public.createListing.futureListing,"?step=").concat(r+1),children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"text-h5",children:[(0,l.jsx)("span",{className:"mb-2 block font-bold",children:"Listing Duration"}),v?"Loading...":(0,l.jsxs)(y.Ph,{disabled:f.length<=1,onValueChange:e=>{Q(Number(e))},value:R.toString(),children:[(0,l.jsx)(y.i4,{disabled:f.length<=1,className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,l.jsx)(y.ki,{placeholder:"Select future listing"})}),(0,l.jsx)(y.Bw,{children:f.map((e,a)=>(0,l.jsx)(y.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:a.toString(),children:(0,l.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,l.jsx)(s.X,{tag:"h3",children:e.title}),(0,l.jsxs)(s.x,{className:"mt-3",children:["Duration"," ",(0,l.jsx)("span",{className:"text-gray-light font-bold",children:e.durationInDays})," ","days"]}),(0,l.jsxs)(s.x,{className:"mt-3",children:["Price"," ",(0,l.jsx)("span",{className:"font-bold",children:e.price})," ",n.$S," "]})]})},a.toString()))})]})]}),b.length>0&&(0,l.jsxs)("label",{className:"text-h5",children:[(0,l.jsx)("span",{className:"mb-2 block font-bold",children:"Select Ad"}),(0,l.jsxs)(y.Ph,{onValueChange:e=>{z(e)},value:T,children:[(0,l.jsx)(y.i4,{className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,l.jsx)(y.ki,{placeholder:"Select ad"})}),(0,l.jsxs)(y.Bw,{children:[T&&(0,l.jsx)(m.zx,{className:"w-full p-4",variant:"ghost",onClick:e=>{e.stopPropagation(),z(void 0)},children:"Clear"}),b.map((e,a)=>e.products.map((t,i)=>(0,l.jsx)(y.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:F(a,i),children:(0,l.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,l.jsx)(s.X,{tag:"h3",children:e.title}),(0,l.jsx)(s.x,{children:t.description}),(0,l.jsxs)(s.x,{className:"mt-3",children:["Duration"," ",(0,l.jsx)("span",{className:"text-gray-light font-bold",children:t.durationInDays})," ","days"]}),(0,l.jsxs)(s.x,{className:"mt-3",children:["Price"," ",(0,l.jsx)("span",{className:"font-bold",children:t.price})," ",n.$S]})]})},F(a,i))))]})]},T)]}),(0,l.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,l.jsxs)(s.x,{children:["Listing (",null==q?void 0:q.durationInDays," days)"]}),(0,l.jsx)(s.x,{children:(0,l.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",null==q?void 0:q.price]})})]}),Z&&B&&(0,l.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)(s.x,{children:["Ad ",null==Z?void 0:Z.title," (",B.durationInDays," ","days)"]}),(0,l.jsx)(s.x,{className:"text-sm",children:B.description})]}),(0,l.jsx)(s.x,{children:(0,l.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",B.price]})})]}),(0,l.jsx)(m.iz,{className:"mb-2 mt-4"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(s.x,{children:"Total"}),(0,l.jsx)(s.x,{children:(0,l.jsxs)("span",{className:"text-h3 font-bold",children:[n.$S," ",V]})})]}),(0,l.jsx)(m.iz,{className:"mt-2 mb-4"}),(0,l.jsx)(m.zx,{disabled:j||U,isLoading:j||U,onClick:X,children:j?"Loading...":"Checkout"})]})}),(0,l.jsx)(m.OZ,{currentStepIdx:r,totalSteps:d,goToPreviousStep:c})]})},{})}],R=()=>{var e;let{stepIdx:a}=(0,i.p)(),t=null!==(e=L[a])&&void 0!==e?e:{};return(0,l.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,l.jsxs)("div",{className:"container-fluid",children:[(0,l.jsx)(s.X,{children:t.title}),t.description&&(0,l.jsx)(s.x,{className:"text-base md:text-xl mt-4",children:t.description}),t.form]})})},Q=()=>{if(!(0,r.O_)())return null;let e=localStorage.getItem(n.uf.FUTURE_LISTING_FORM_DATA),a=e?JSON.parse(e):{};return(0,l.jsx)(i.z,{totalSteps:L.length,initialData:a,onChangeData:e=>{localStorage.setItem(n.uf.FUTURE_LISTING_FORM_DATA,JSON.stringify(e))},validationSchemas:L.map(e=>e.validationSchema),children:(0,l.jsx)(R,{})})},T="force-dynamic";function z(){return(0,l.jsx)("section",{className:"pt-16 md:pt-20 4xl:pt-24",children:(0,l.jsx)("div",{className:"flex justify-center mt-10 lg:mt-14 h-[calc(100vh-64px)] md:h-[calc(100vh-80px)] 4xl:h-[calc(100vh-96px)]",children:(0,l.jsx)(Q,{})})})}function q(){return(0,l.jsx)(h.Suspense,{fallback:null,children:(0,l.jsx)(z,{})})}},44558:function(e,a,t){"use strict";t.d(a,{M:function(){return m}});var l=t(48622);t(57938);var s=t(59727),i=t(8228),r=t(85830),n=t(91872),d=t(97552);function o(e){let{className:a,classNames:t,showOutsideDays:s=!0,...i}=e;return(0,l.jsx)(d._,{showOutsideDays:s,className:(0,r.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,n.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-neutral-500 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-neutral-100/50 [&:has([aria-selected])]:bg-neutral-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,n.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900 hover:text-neutral-50 focus:bg-neutral-900 focus:text-neutral-50",day_today:"bg-neutral-100 text-neutral-900",day_outside:"day-outside text-neutral-500 opacity-50 aria-selected:bg-neutral-100/50 aria-selected:text-neutral-500 aria-selected:opacity-30",day_disabled:"text-neutral-500 opacity-50",day_range_middle:"aria-selected:bg-neutral-100 aria-selected:text-neutral-900",day_hidden:"invisible",...t},...i})}o.displayName="Calendar";var c=t(46513),u=t(52853);function m(e){let{date:a,setDate:t,error:d,...m}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.J2,{children:[(0,l.jsx)(c.xo,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"outline",size:"lg",className:(0,r.cn)("w-full justify-start text-left font-normal px-4",!a&&"text-muted-foreground",d&&"border border-red-500"),children:[(0,l.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),a?(0,s.WU)(a,"PPP"):(0,l.jsx)("span",{children:"Pick a date"})]})}),(0,l.jsx)(c.yk,{className:"w-auto p-0",children:(0,l.jsx)(o,{...m,mode:"single",selected:a,onSelect:t,initialFocus:!0})})]}),d&&(0,l.jsx)(u.cp,{size:"lg",error:d})]})}}},function(e){e.O(0,[1525,9618,8029,328,1993,8278,5880,2647,1910,6899,1509,2290,9770,9889,5846,9570,4448,9764,7741,7476,8805,2351,1744],function(){return e(e.s=50221)}),_N_E=e.O()}]);