(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5520],{33780:function(e,l,a){Promise.resolve().then(a.bind(a,44137))},44137:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return T},dynamic:function(){return R}});var t=a(48622),s=a(68843),i=a(69700),r=a(31552),n=a(8475),d=a(43413),o=a(96287),c=a(16140),u=a(81910),m=a(52853),v=a(44448),x=a(23172),h=a(46834),g=a(76771),p=a(57938),b=a(83804),f=a(44558),j=a(38952);let N=o.Ry({title:o.Z_({message:"Please enter title"}).min(1,{message:"Please enter title"}),breed:o.Z_({message:"Please select breed"}).min(1,{message:"Please select breed"}),dateOfBirth:o.oQ.date({message:"Please enter date of birth"}).refine(e=>e<=new Date,{message:"Date should not be in the future."}),healthCertificatesText:o.Z_({message:"Please enter health certificates"}),healthCertificatesImages:(0,j.NY)({maxFileSize:1048576,maxImages:3,minImages:0}),serviceFee:o.oQ.number().min(1,{message:"Please enter fee"}).max(1e8,{message:"Please enter valid stud fee"}),dogName:o.Z_({message:"Please enter dog name"}).min(1,{message:"Please enter dog name"}),ankcNumber:o.Z_({message:"Please enter ANKC number"}).min(1,{message:"Please enter ANKC number"}),availibilityDate:o.oQ.date({message:"Please enter collection date"}).refine(e=>e>=new Date,{message:"Date should be in the future."}),images:(0,j.NY)({maxFileSize:1048576,maxImages:10,minImages:1}),provenLittersImages:(0,j.NY)({maxFileSize:1048576,maxImages:10,minImages:1}),provenLittersVideoUrls:o.IX(j.jN).optional().default([]),videoUrls:o.IX(j.jN).optional().default([])});var y=a(50386),I=a(19491),w=a(52426),C=a(63852),S=a(75640),_=a(60062),D=a(89127),L=a(54663),U=a(91269),k=a(18610);let P=(e,l)=>"".concat(e,"@").concat(l),F=e=>{let[l,a]=e.split("@");return{adIdx:Number(l),productIdx:Number(a)}},A=[{title:"Stud or Bitch Listing",description:"Create a new stud or bitch listing",form:(0,t.jsx)(()=>{var e,l,a,s,r,n,d,o,j,y,I,w,C,S,_,D,L,U;let{stepIdx:k,totalSteps:P,formData:F,goToNextStep:A,goToPreviousStep:O,appendFormData:z}=(0,i.p)(),{handleSubmit:R,watch:Q,register:T,control:V,formState:{errors:B}}=(0,c.cI)({defaultValues:{title:F.title,breed:F.breed,dateOfBirth:F.dateOfBirth,healthCertificatesText:F.healthCertificatesText,healthCertificatesImages:F.healthCertificatesImages,serviceFee:F.serviceFee,availibilityDate:F.availibilityDate,dogName:F.dogName,ankcNumber:F.ankcNumber,images:F.images,videoUrls:F.videoUrls,provenLittersImages:F.provenLittersImages,provenLittersVideoUrls:F.provenLittersVideoUrls},mode:"onChange",resolver:(0,u.F)(N)}),Z=Q();return(0,p.useEffect)(()=>{(0,b.SI)(Z)||z(Z)},[Z,z]),(0,t.jsxs)("form",{className:"pt-10 pb-28",noValidate:!0,onSubmit:R(e=>{A(e)}),children:[(0,t.jsx)(m.II,{type:"text",label:"Listing title",className:"mb-4",error:null==B?void 0:null===(e=B.title)||void 0===e?void 0:e.message,required:!0,...T("title")}),(0,t.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-start justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(c.Qr,{name:"breed",control:V,render:e=>{var l;let{field:a}=e;return(0,t.jsx)(v.hQ,{label:"Select breed",value:a.value,setValue:e=>a.onChange(e),options:x.AW.map(e=>({value:e.value,label:e.label})),btnClassName:"w-full active:!scale-100",popoverClassName:"w-[--radix-popover-trigger-width] ",error:null==B?void 0:null===(l=B.breed)||void 0===l?void 0:l.message})}})}),(0,t.jsx)(c.Qr,{name:"dateOfBirth",control:V,render:e=>{var l;let{field:a}=e;return(0,t.jsxs)("label",{className:"flex-1",children:[(0,t.jsx)("span",{className:"mb-2 block font-bold text-sm",children:"Date of birth"}),(0,t.jsx)(f.M,{mode:"single",date:a.value,setDate:e=>{a.onChange(e)},error:null==B?void 0:null===(l=B.dateOfBirth)||void 0===l?void 0:l.message,disabled:{after:new Date}})]})}})]}),(0,t.jsxs)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:[(0,t.jsx)(m.II,{type:"text",label:"Dog name",className:"flex-1",error:null==B?void 0:null===(l=B.dogName)||void 0===l?void 0:l.message,required:!0,...T("dogName")}),(0,t.jsx)(m.II,{type:"number",label:"Service Fee",className:"flex-1",error:null==B?void 0:null===(a=B.serviceFee)||void 0===a?void 0:a.message,required:!0,...T("serviceFee")})]}),(0,t.jsx)("div",{className:"mb-4 flex-col sm:flex-row space-x-0 flex sm:items-center justify-between sm:space-x-5 space-y-4 sm:space-y-0",children:(0,t.jsx)(c.Qr,{name:"availibilityDate",control:V,render:e=>{var l;let{field:a}=e;return(0,t.jsxs)("label",{className:"flex-1",children:[(0,t.jsx)("span",{className:"block font-bold text-sm mb-1.5",children:"Availibility date"}),(0,t.jsx)(f.M,{mode:"single",date:a.value,setDate:e=>{a.onChange(e)},error:null==B?void 0:null===(l=B.availibilityDate)||void 0===l?void 0:l.message,disabled:{before:new Date}})]})}})}),(0,t.jsx)(m.II,{type:"text",label:"ANKC / State Breeder Registration Number",className:"my-4",error:null==B?void 0:null===(s=B.ankcNumber)||void 0===s?void 0:s.message,required:!0,...T("ankcNumber")}),(0,t.jsx)(m.II,{type:"text",label:"Health certificate",className:"mb-4",error:null==B?void 0:null===(r=B.healthCertificatesText)||void 0===r?void 0:r.message,required:!0,...T("healthCertificatesText")}),(0,t.jsx)(c.Qr,{name:"healthCertificatesImages",control:V,render:e=>{let{field:l}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.b,{label:"Upload health certificates",accept:"image/*",multiple:!0,onChange:e=>{var a;l.onChange([...null!==(a=l.value)&&void 0!==a?a:[],...Array.from(e)])}}),l.value&&(0,t.jsx)(g.e,{className:"mb-4",images:l.value.map((e,l)=>{var a,t;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==B?void 0:null===(t=B.healthCertificatesImages)||void 0===t?void 0:null===(a=t[l])||void 0===a?void 0:a.message}}),onDelete:e=>{l.value.splice(e,1),l.onChange(l.value)}})]})}}),(null==B?void 0:B.healthCertificatesImages)&&(0,t.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==B?void 0:null===(n=B.healthCertificatesImages)||void 0===n?void 0:n.message}),(0,t.jsx)(c.Qr,{name:"images",control:V,render:e=>{let{field:l}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.b,{label:"Upload stud or bitch images",accept:"image/*",multiple:!0,onChange:e=>{var a;l.onChange([...null!==(a=l.value)&&void 0!==a?a:[],...Array.from(e)])}}),l.value&&(0,t.jsx)(g.e,{className:"mb-4",images:l.value.map((e,l)=>{var a,t;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==B?void 0:null===(t=B.images)||void 0===t?void 0:null===(a=t[l])||void 0===a?void 0:a.message}}),onDelete:e=>{l.value.splice(e,1),l.onChange(l.value)}})]})}}),(null==B?void 0:B.images)&&(0,t.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==B?void 0:null===(d=B.images)||void 0===d?void 0:d.message}),(0,t.jsx)(c.Qr,{name:"videoUrls",control:V,render:e=>{var l,a,s;let{field:i}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.II,{type:"text",label:"Enter stud or bitch video URLs (comma separated)",className:"flex-1 mb-4",error:null==B?void 0:null===(l=B.videoUrls)||void 0===l?void 0:l.message,required:!0,value:null!==(s=null===(a=i.value)||void 0===a?void 0:a.join(","))&&void 0!==s?s:"",onChange:e=>{let l=e.target.value;i.onChange(l?l.split(","):[])}})})}}),(null==B?void 0:null===(o=B.videoUrls)||void 0===o?void 0:o.length)&&(null==B?void 0:null===(j=B.videoUrls)||void 0===j?void 0:j.length)>0&&(0,t.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==B?void 0:null===(w=B.videoUrls)||void 0===w?void 0:null===(I=w.find)||void 0===I?void 0:null===(y=I.call(w,e=>!!(null==e?void 0:e.message)))||void 0===y?void 0:y.message}),(0,t.jsx)(c.Qr,{name:"provenLittersImages",control:V,render:e=>{let{field:l}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.b,{label:"Upload proven litter images",accept:"image/*",multiple:!0,onChange:e=>{var a;l.onChange([...null!==(a=l.value)&&void 0!==a?a:[],...Array.from(e)])}}),l.value&&(0,t.jsx)(g.e,{className:"mb-4",images:l.value.map((e,l)=>{var a,t;return{url:e instanceof File?URL.createObjectURL(e):"",error:null==B?void 0:null===(t=B.provenLittersImages)||void 0===t?void 0:null===(a=t[l])||void 0===a?void 0:a.message}}),onDelete:e=>{l.value.splice(e,1),l.onChange(l.value)}})]})}}),(null==B?void 0:B.provenLittersImages)&&(0,t.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==B?void 0:null===(C=B.provenLittersImages)||void 0===C?void 0:C.message}),(0,t.jsx)(c.Qr,{name:"provenLittersVideoUrls",control:V,render:e=>{var l,a,s;let{field:i}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.II,{type:"text",label:"Enter proven litter video URLs (comma separated)",className:"flex-1 mb-4",error:null==B?void 0:null===(l=B.provenLittersVideoUrls)||void 0===l?void 0:l.message,required:!0,value:null!==(s=null===(a=i.value)||void 0===a?void 0:a.join(","))&&void 0!==s?s:"",onChange:e=>{let l=e.target.value;i.onChange(l?l.split(","):[])}})})}}),(null==B?void 0:null===(S=B.provenLittersVideoUrls)||void 0===S?void 0:S.length)&&(null==B?void 0:null===(_=B.provenLittersVideoUrls)||void 0===_?void 0:_.length)>0&&(0,t.jsx)(m.cp,{className:"mb-4",size:"lg",error:null==B?void 0:null===(U=B.provenLittersVideoUrls)||void 0===U?void 0:null===(L=U.find)||void 0===L?void 0:null===(D=L.call(U,e=>!!(null==e?void 0:e.message)))||void 0===D?void 0:D.message}),(0,t.jsx)(v.OZ,{currentStepIdx:k,totalSteps:P,goToPreviousStep:O})]})},{}),validationSchema:N},{title:"Contact Information",description:"",form:(0,t.jsx)(d.b,{}),validationSchema:d.R},{title:"Checkout",description:"",form:(0,t.jsx)(()=>{var e,l,a;let{stepIdx:r,totalSteps:d,getFormData:o,goToPreviousStep:c,appendFormData:u,replaceFormData:m}=(0,i.p)(),{data:x,isLoading:h}=(0,U.X)("stud_bitch"),g=null!==(l=null==x?void 0:x.products)&&void 0!==l?l:[],{data:b=[]}=(0,k.x)("stud_bitch"),{mutateAsync:f,isPending:j}=(0,C.Pl)(),{mutateAsync:N,isPending:A}=(0,D.f)(),O=(0,L.useRouter)(),[z,R]=(0,p.useState)(0),[Q,T]=(0,p.useState)(void 0),V=g[z],B=Q?F(Q):void 0,Z=B?b[B.adIdx]:void 0,q=B?null==Z?void 0:null===(e=Z.products)||void 0===e?void 0:e[B.productIdx]:void 0,E=(null!==(a=null==V?void 0:V.price)&&void 0!==a?a:0)+(q?q.price:0),X=async e=>{try{let{checkoutUrl:l}=await N(e);m({}),O.push(l)}catch(a){var l;console.error(a);let e=(0,S.v)(a);(0,_.Am)({title:"Failed to create checkout link",description:null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Something went wrong"})}},M=async()=>{if(!V){(0,_.Am)({title:"Failed!",description:"Please select a listing duration"});return}if(Z&&q&&V.durationInDays<q.durationInDays){(0,_.Am)({title:"Failed!",description:"Ad duration is greater than listing duration"});return}let e=o();if(e.listingId){X({listingId:e.listingId,durationInDays:V.durationInDays,adId:null==Z?void 0:Z.id,adDurationInDays:null==q?void 0:q.durationInDays});return}try{let l=await f({type:"stud_bitch",fields:e});u({listingId:l.id}),await X({listingId:l.id,durationInDays:V.durationInDays,adId:null==Z?void 0:Z.id,adDurationInDays:null==q?void 0:q.durationInDays})}catch(a){var l;console.error(a);let e=(0,S.v)(a);(0,_.Am)({title:"Failed!",description:null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Something went wrong"})}};return(0,t.jsxs)("div",{className:"mt-6 pb-40",children:[(0,t.jsx)(I.RequireUser,{className:"max-w-full",successRedirect:"".concat(w.Z.public.createListing.studListing,"?step=").concat(r+1),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("label",{className:"text-h5",children:[(0,t.jsx)("span",{className:"mb-2 block font-bold",children:"Listing Duration"}),h?"Loading...":(0,t.jsxs)(y.Ph,{disabled:g.length<=1,onValueChange:e=>{R(Number(e))},value:z.toString(),children:[(0,t.jsx)(y.i4,{disabled:g.length<=1,className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,t.jsx)(y.ki,{placeholder:"Select stud / bitch listing"})}),(0,t.jsx)(y.Bw,{children:g.map((e,l)=>(0,t.jsx)(y.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:l.toString(),children:(0,t.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,t.jsx)(s.X,{tag:"h3",children:e.title}),(0,t.jsxs)(s.x,{className:"mt-3",children:["Duration"," ",(0,t.jsx)("span",{className:"text-gray-light font-bold",children:e.durationInDays})," ","days"]}),(0,t.jsxs)(s.x,{className:"mt-3",children:["Price"," ",(0,t.jsx)("span",{className:"font-bold",children:e.price})," ",n.$S," "]})]})},l.toString()))})]})]}),b.length>0&&(0,t.jsxs)("label",{className:"text-h5",children:[(0,t.jsx)("span",{className:"mb-2 block font-bold",children:"Select Ad"}),(0,t.jsxs)(y.Ph,{onValueChange:e=>{T(e)},value:Q,children:[(0,t.jsx)(y.i4,{className:"mb-4 h-auto [&>span]:block [&_.select-box]:border-none text-start disabled:!opacity-100",children:(0,t.jsx)(y.ki,{placeholder:"Select ad"})}),(0,t.jsxs)(y.Bw,{children:[Q&&(0,t.jsx)(v.zx,{className:"w-full p-4",variant:"ghost",onClick:e=>{e.stopPropagation(),T(void 0)},children:"Clear"}),b.map((e,l)=>e.products.map((a,i)=>(0,t.jsx)(y.Ql,{className:"w-full flex-1 [&_span[id^='radix-']]:block [&_span[id^='radix-']]:w-full",value:P(l,i),children:(0,t.jsxs)("div",{className:"select-box border rounded-md p-2 w-full flex-1",children:[(0,t.jsx)(s.X,{tag:"h3",children:e.title}),(0,t.jsx)(s.x,{children:a.description}),(0,t.jsxs)(s.x,{className:"mt-3",children:["Duration"," ",(0,t.jsx)("span",{className:"text-gray-light font-bold",children:a.durationInDays})," ","days"]}),(0,t.jsxs)(s.x,{className:"mt-3",children:["Price"," ",(0,t.jsx)("span",{className:"font-bold",children:a.price})," ",n.$S]})]})},P(l,i))))]})]},Q)]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,t.jsxs)(s.x,{children:["Listing (",null==V?void 0:V.durationInDays," days)"]}),(0,t.jsx)(s.x,{children:(0,t.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",null==V?void 0:V.price]})})]}),Z&&q&&(0,t.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.x,{children:["Ad ",null==Z?void 0:Z.title," (",q.durationInDays," ","days)"]}),(0,t.jsx)(s.x,{className:"text-sm",children:q.description})]}),(0,t.jsx)(s.x,{children:(0,t.jsxs)("span",{className:"text-h4 font-bold",children:[n.$S," ",q.price]})})]}),(0,t.jsx)(v.iz,{className:"mb-2 mt-4"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(s.x,{children:"Total"}),(0,t.jsx)(s.x,{children:(0,t.jsxs)("span",{className:"text-h3 font-bold",children:[n.$S," ",E]})})]}),(0,t.jsx)(v.iz,{className:"mt-2 mb-4"}),(0,t.jsx)(v.zx,{disabled:j||A,isLoading:j||A,onClick:M,children:j?"Loading...":"Checkout"})]})}),(0,t.jsx)(v.OZ,{currentStepIdx:r,totalSteps:d,goToPreviousStep:c})]})},{})}],O=()=>{var e;let{stepIdx:l}=(0,i.p)(),a=null!==(e=A[l])&&void 0!==e?e:{};return(0,t.jsx)("div",{className:"w-full max-w-5xl mx-auto",children:(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)(s.X,{children:a.title}),a.description&&(0,t.jsx)(s.x,{className:"text-base md:text-xl mt-4",children:a.description}),a.form]})})},z=()=>{if(!(0,r.O_)())return null;let e=localStorage.getItem(n.uf.STUD_LISTING_FORM_DATA),l=e?JSON.parse(e):{};return(0,t.jsx)(i.z,{totalSteps:A.length,initialData:l,onChangeData:e=>{localStorage.setItem(n.uf.STUD_LISTING_FORM_DATA,JSON.stringify(e))},validationSchemas:A.map(e=>e.validationSchema),children:(0,t.jsx)(O,{})})},R="force-dynamic";function Q(){return(0,t.jsx)("section",{className:"pt-16 md:pt-20 4xl:pt-24",children:(0,t.jsx)("div",{className:"flex justify-center mt-10 lg:mt-14 h-[calc(100vh-64px)] md:h-[calc(100vh-80px)] 4xl:h-[calc(100vh-96px)]",children:(0,t.jsx)(z,{})})})}function T(){return(0,t.jsx)(p.Suspense,{fallback:null,children:(0,t.jsx)(Q,{})})}},44558:function(e,l,a){"use strict";a.d(l,{M:function(){return m}});var t=a(48622);a(57938);var s=a(59727),i=a(8228),r=a(85830),n=a(91872),d=a(97552);function o(e){let{className:l,classNames:a,showOutsideDays:s=!0,...i}=e;return(0,t.jsx)(d._,{showOutsideDays:s,className:(0,r.cn)("p-3",l),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,n.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-neutral-500 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-neutral-100/50 [&:has([aria-selected])]:bg-neutral-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,n.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900 hover:text-neutral-50 focus:bg-neutral-900 focus:text-neutral-50",day_today:"bg-neutral-100 text-neutral-900",day_outside:"day-outside text-neutral-500 opacity-50 aria-selected:bg-neutral-100/50 aria-selected:text-neutral-500 aria-selected:opacity-30",day_disabled:"text-neutral-500 opacity-50",day_range_middle:"aria-selected:bg-neutral-100 aria-selected:text-neutral-900",day_hidden:"invisible",...a},...i})}o.displayName="Calendar";var c=a(46513),u=a(52853);function m(e){let{date:l,setDate:a,error:d,...m}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.J2,{children:[(0,t.jsx)(c.xo,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"outline",size:"lg",className:(0,r.cn)("w-full justify-start text-left font-normal px-4",!l&&"text-muted-foreground",d&&"border border-red-500"),children:[(0,t.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),l?(0,s.WU)(l,"PPP"):(0,t.jsx)("span",{children:"Pick a date"})]})}),(0,t.jsx)(c.yk,{className:"w-auto p-0",children:(0,t.jsx)(o,{...m,mode:"single",selected:l,onSelect:a,initialFocus:!0})})]}),d&&(0,t.jsx)(u.cp,{size:"lg",error:d})]})}}},function(e){e.O(0,[1525,9618,8029,328,1993,8278,5880,2647,1910,6899,1509,2290,9770,9889,5846,9570,4448,9764,7741,7476,8805,2351,1744],function(){return e(e.s=33780)}),_N_E=e.O()}]);